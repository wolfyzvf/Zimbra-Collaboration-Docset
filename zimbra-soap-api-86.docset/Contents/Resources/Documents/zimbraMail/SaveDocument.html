<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head>

<!-- Generated by 8.6.0_GA_1159 on 20150209180001 -->
<title>
Zimbra SOAP API Reference 8.6.0_GA_1159
</title>

<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style"/>

<script type="text/javascript">
function windowTitle()
{
    parent.document.title="Command <SaveDocumentRequest> (Zimbra SOAP API Reference 8.6.0_GA_1159)";
}
</script>

</head>

<body bgcolor="white" onload="windowTitle();">

<table cellspacing="3" cellpadding="0" border="0" summary="" bgcolor="#eeeeff">
  <tbody>
  <tr valign="top" align="center">
  <td bgcolor="#ffffff" class="NavBarCell1"> <a href="../overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#eeeeff" class="NavBarCell1">    <a href="./service-summary.html"><font class="NavBarFont1"><b>Service</b></font></a>&nbsp;</td>
  <td bgcolor="#eeeeff" class="NavBarCell1Rev">    &nbsp;<font class="NavBarFont1Rev"><b>Command</b></font>&nbsp;</td>
  </tr>
  </tbody>
</table>

<hr/>
<h2>
<font size="-1"><a href="./service-summary.html">Service: zimbraMail</a></font>
<br/>
<font size="-1">Namespace: &#34;urn:zimbraMail&#34;</font>
<br/>
SaveDocument SOAP Command</h2>
<p>
Save Document
 <br/>
 <br/>
 One mechanism for Creating and updating a Document is:
 </p><ol>
 <li> Use FileUploadServlet to upload the document
 </li><li> Call SaveDocumentRequest using the upload-id returned from FileUploadServlet.
 </li></ol>
 A Document represents a file.  A file can be created by uploading to FileUploadServlet.  Or it can refer to an
 attachment of an existing message.
 <br/>
 <br/>
 Documents are versioned.  The server maintains the metadata of each version, such as by who and when the version
 was edited, and the fragment.
 <br/>
 <br/>
 When updating an existing Document, the client must supply the id of Document, and the last known version of the
 document in the &#39;ver&#39; attribute.  This is used to prevent blindly overwriting someone else&#39;s change made after
 the version this update was based upon.  The update will succeed only when the last known version supplied by the
 client matches the current version of the item identified by item-id.
 <br/>
 <br/>
 Saving a new document, as opposed to adding a revision of existing document, should leave the id and ver fields
 empty in the request.  Then the server checks and see if the named document already exists, if so returns an error.
 <br/>
 <br/>
 The request should contain either an <b>&lt;upload&gt;</b> element or a <b>&lt;msg&gt;</b> element, but not both.
 When <b>&lt;upload&gt;</b> is used, the document should first be uploaded to FileUploadServlet, and then use the
 upload-id from the FileUploadResponse.
 <br/>
 When <b>&lt;m&gt;</b> is used, the document is retrieved from an existing message in the mailbox, identified by the
 msg-id and part-id.  The content of the document can be inlined in the <b>&lt;content&gt;</b> element.
 The content can come from another document / revision specified in the <b>&lt;doc&gt;</b> sub element.
 <br/>
 Examples:
 <br/>
 <br/>
 Saving a new document:
 <pre>     &lt;SaveDocumentRequest xmlns:ns0=&#34;urn:zimbraMail&#34;&gt;
       &lt;doc&gt;
         &lt;upload id=&#34;18baa043-394f-42ae-be8a-110b279cb696:cc2f2fdf-7957-4412-aa83-6433662ce5d0&#34;/&gt;
       &lt;/doc&gt;
     &lt;/SaveDocumentRequest&gt;

     &lt;SaveDocumentResponse xmlns:ns0=&#34;urn:zimbraMail&#34;&gt;
       &lt;doc ver=&#34;1&#34; id=&#34;574&#34; name=&#34;PICT0370.JPG&#34;/&gt;
     &lt;/SaveDocumentResponse&gt;
 </pre>
 Updating an existing document
 <pre>     &lt;SaveDocumentRequest xmlns:ns0=&#34;urn:zimbraMail&#34;&gt;
       &lt;doc ver=&#34;1&#34; id=&#34;574&#34; desc=&#34;rev 2.0&#34;&gt;
         &lt;upload id=&#34;18baa043-394f-42ae-be8a-110b279cb696:fcb572ce-2a81-4ad3-b55b-cb998c47b416&#34;/&gt;
       &lt;/doc&gt;
     &lt;/SaveDocumentRequest&gt;

     &lt;SaveDocumentResponse xmlns:ns0=&#34;urn:zimbraMail&#34;&gt;
       &lt;doc ver=&#34;2&#34; id=&#34;574&#34; name=&#34;PICT0370.JPG&#34;/&gt;
     &lt;/SaveDocumentResponse&gt;
 </pre>
<p></p>
<table cellspacing="0" cellpadding="5" border="1">
    <tbody><tr> <td> Authorization token required </td> <td> <b>true</b> </td> </tr>
    <tr> <td> Admin Authorization token required </td> <td> <b>false</b> </td> </tr>
</tbody></table>
<h2><a name="request">SaveDocumentRequest</a></h2>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span id="elementName">SaveDocumentRequest</span>&gt; ## SaveDocumentRequest<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span id="elementName"><a href="#tbl-SaveDocumentRequest-doc">doc</a></span> [<span id="attrName"><a href="#tbl-SaveDocumentRequest-doc-name">name</a></span>=<span id="value">&#34;{file-name}&#34;</span>] [<span id="attrName"><a href="#tbl-SaveDocumentRequest-doc-ct">ct</a></span>=<span id="value">&#34;{content-type}&#34;</span>] [<span id="attrName"><a href="#tbl-SaveDocumentRequest-doc-desc">desc</a></span>=<span id="value">&#34;{description}&#34;</span>] [<span id="attrName"><a href="#tbl-SaveDocumentRequest-doc-l">l</a></span>=<span id="value">&#34;{folder-id}&#34;</span>] [<span id="attrName"><a href="#tbl-SaveDocumentRequest-doc-id">id</a></span>=<span id="value">&#34;{item-id}&#34;</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [<span id="attrName"><a href="#tbl-SaveDocumentRequest-doc-ver">ver</a></span>=<span id="value">&#34;{last-known-version} (Integer)&#34;</span>] [<span id="attrName"><a href="#tbl-SaveDocumentRequest-doc-content">content</a></span>=<span id="value">&#34;{inlined-document-content-string}&#34;</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [<span id="attrName"><a href="#tbl-SaveDocumentRequest-doc-descEnabled">descEnabled</a></span>=<span id="value">&#34;{desc-enabled} (0|1)&#34;</span>] [<span id="attrName"><a href="#tbl-SaveDocumentRequest-doc-f">f</a></span>=<span id="value">&#34;{flags}&#34;</span>]&gt; ## DocumentSpec<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span id="elementName"><a href="#tbl-SaveDocumentRequest-doc-upload">upload</a></span> [<span id="attrName"><a href="#tbl-SaveDocumentRequest-doc-upload-id">id</a></span>=<span id="value">&#34;...&#34;</span>] /&gt; ## Id<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span id="elementName"><a href="#tbl-SaveDocumentRequest-doc-m">m</a></span> <span id="attrName"><a href="#tbl-SaveDocumentRequest-doc-m-id">id</a></span>=<span id="value">&#34;{message-id}&#34;</span> <span id="attrName"><a href="#tbl-SaveDocumentRequest-doc-m-part">part</a></span>=<span id="value">&#34;{part-id}&#34;</span> /&gt; ## MessagePartSpec<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span id="elementName"><a href="#tbl-SaveDocumentRequest-doc-doc">doc</a></span> <span id="attrName"><a href="#tbl-SaveDocumentRequest-doc-doc-id">id</a></span>=<span id="value">&#34;{id}&#34;</span> [<span id="attrName"><a href="#tbl-SaveDocumentRequest-doc-doc-ver">ver</a></span>=<span id="value">&#34;{version} (Integer)&#34;</span>] /&gt; ## IdVersion<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/<span id="elementName">doc</span>&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/<span id="elementName">SaveDocumentRequest</span>&gt;<br/>

</p>
<p>
The following table describes elements and attributes you can define within a
<a class="dashingAutolink" name="autolink-658"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/SaveDocumentRequest"></a><code>&lt;SaveDocumentRequest&gt;</code> element:
</p>
<table cellspacing="0" cellpadding="5" border="1" width="100%">
<tbody>
    <tr bgcolor="#CCCCFF" class="TableHeadingColor">
        <td width="1%" nowrap=""><b>XPath</b></td>
        <td width="1%" nowrap=""><b>Required / Optional</b></td>
        <td><b>Description</b></td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentRequest-doc">/doc</a> </td>
        <td>
              Required (only 1)
        </td>
        <td>Document specification</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentRequest-doc-name">/doc@name</a> </td>
        <td>
              Optional (0 or 1)
        </td>
        <td><b>Type:String</b><br/>
File name</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentRequest-doc-ct">/doc@ct</a> </td>
        <td>
              Optional (0 or 1)
        </td>
        <td><b>Type:String</b><br/>
Content Type</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentRequest-doc-desc">/doc@desc</a> </td>
        <td>
              Optional (0 or 1)
        </td>
        <td><b>Type:String</b><br/>
Description</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentRequest-doc-l">/doc@l</a> </td>
        <td>
              Optional (0 or 1)
        </td>
        <td><b>Type:String</b><br/>
Folder ID</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentRequest-doc-id">/doc@id</a> </td>
        <td>
              Optional (0 or 1)
        </td>
        <td><b>Type:String</b><br/>
Item ID</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentRequest-doc-ver">/doc@ver</a> </td>
        <td>
              Optional (0 or 1)
        </td>
        <td><b>Type:Integer</b><br/>
Last known version</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentRequest-doc-content">/doc@content</a> </td>
        <td>
              Optional (0 or 1)
        </td>
        <td><b>Type:String</b><br/>
Inlined document content string</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentRequest-doc-descEnabled">/doc@descEnabled</a> </td>
        <td>
              Optional (0 or 1)
        </td>
        <td><b>Type:0|1</b><br/>
Desc enabled flag</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentRequest-doc-f">/doc@f</a> </td>
        <td>
              Optional (0 or 1)
        </td>
        <td><b>Type:String</b><br/>
Flags - Any of the flags specified in soap.txt, with the addition of <b>&#34;t&#34;</b>, which
 specifies that the document is a note.</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentRequest-doc-upload">/doc/upload</a> </td>
        <td>
              Optional (0 or 1)
        </td>
        <td>Upload specification</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentRequest-doc-upload-id">/doc/upload@id</a> </td>
        <td>
              Optional (0 or 1)
        </td>
        <td><b>Type:String</b><br/>
ID</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentRequest-doc-m">/doc/m</a> </td>
        <td>
              Optional (0 or 1)
        </td>
        <td>Message part specification</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentRequest-doc-m-id">/doc/m@id</a> </td>
        <td>
              Required (only 1)
        </td>
        <td><b>Type:String</b><br/>
Message ID</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentRequest-doc-m-part">/doc/m@part</a> </td>
        <td>
              Required (only 1)
        </td>
        <td><b>Type:String</b><br/>
Part ID</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentRequest-doc-doc">/doc/doc</a> </td>
        <td>
              Optional (0 or 1)
        </td>
        <td>Information on document version to restore to</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentRequest-doc-doc-id">/doc/doc@id</a> </td>
        <td>
              Required (only 1)
        </td>
        <td><b>Type:String</b><br/>
ID</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentRequest-doc-doc-ver">/doc/doc@ver</a> </td>
        <td>
              Optional (0 or 1)
        </td>
        <td><b>Type:Integer</b><br/>
Version</td>
    </tr>
</tbody>
</table>

<h2><a name="response">SaveDocumentResponse</a></h2>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span id="elementName">SaveDocumentResponse</span>&gt; ## SaveDocumentResponse<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span id="elementName"><a href="#tbl-SaveDocumentResponse-doc">doc</a></span> <span id="attrName"><a href="#tbl-SaveDocumentResponse-doc-id">id</a></span>=<span id="value">&#34;{id}&#34;</span> <span id="attrName"><a href="#tbl-SaveDocumentResponse-doc-ver">ver</a></span>=<span id="value">&#34;{version} (int)&#34;</span> <span id="attrName"><a href="#tbl-SaveDocumentResponse-doc-name">name</a></span>=<span id="value">&#34;{name}&#34;</span> /&gt; ## IdVersionName<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/<span id="elementName">SaveDocumentResponse</span>&gt;<br/>

</p>
<p>
The following table describes elements and attributes you can define within a
<a class="dashingAutolink" name="autolink-659"></a><a class="dashAnchor" name="//apple_ref/cpp/Command/SaveDocumentResponse"></a><code>&lt;SaveDocumentResponse&gt;</code> element:
</p>
<table cellspacing="0" cellpadding="5" border="1" width="100%">
<tbody>
    <tr bgcolor="#CCCCFF" class="TableHeadingColor">
        <td width="1%" nowrap=""><b>XPath</b></td>
        <td width="1%" nowrap=""><b>Required / Optional</b></td>
        <td><b>Description</b></td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentResponse-doc">/doc</a> </td>
        <td>
              Optional (0 or 1)
        </td>
        <td>Details of saved document revision</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentResponse-doc-id">/doc@id</a> </td>
        <td>
              Required (only 1)
        </td>
        <td><b>Type:String</b><br/>
ID</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentResponse-doc-ver">/doc@ver</a> </td>
        <td>
              Required (only 1)
        </td>
        <td><b>Type:int</b><br/>
Version</td>
    </tr>
    <tr>
        <td> <a name="tbl-SaveDocumentResponse-doc-name">/doc@name</a> </td>
        <td>
              Required (only 1)
        </td>
        <td><b>Type:String</b><br/>
Name</td>
    </tr>
</tbody>
</table>


</body></html>