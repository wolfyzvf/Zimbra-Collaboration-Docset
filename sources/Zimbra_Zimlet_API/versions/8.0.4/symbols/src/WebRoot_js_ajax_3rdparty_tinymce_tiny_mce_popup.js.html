<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.line {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class='line'>  1</span> <span class="COMM">/*
<span class='line'>  2</span>  * ***** BEGIN LICENSE BLOCK *****
<span class='line'>  3</span>  * 
<span class='line'>  4</span>  * Zimbra Collaboration Suite Web Client
<span class='line'>  5</span>  * Copyright (C) 2012 VMware, Inc.
<span class='line'>  6</span>  * 
<span class='line'>  7</span>  * The contents of this file are subject to the Zimbra Public License
<span class='line'>  8</span>  * Version 1.3 ("License"); you may not use this file except in
<span class='line'>  9</span>  * compliance with the License.  You may obtain a copy of the License at
<span class='line'> 10</span>  * http://www.zimbra.com/license.
<span class='line'> 11</span>  * 
<span class='line'> 12</span>  * Software distributed under the License is distributed on an "AS IS"
<span class='line'> 13</span>  * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.
<span class='line'> 14</span>  * 
<span class='line'> 15</span>  * ***** END LICENSE BLOCK *****
<span class='line'> 16</span>  */</span><span class="WHIT">
<span class='line'> 17</span> 
<span class='line'> 18</span> </span><span class="COMM">// Uncomment and change this document.domain value if you are loading the script cross subdomains</span><span class="WHIT">
<span class='line'> 19</span> </span><span class="COMM">// document.domain = 'moxiecode.com';</span><span class="WHIT">
<span class='line'> 20</span> 
<span class='line'> 21</span> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">tinymce</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">tinyMCEPopup</span><span class="PUNC">,</span><span class="NAME">tinyMCE</span><span class="PUNC">;</span><span class="NAME">tinyMCEPopup</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">init</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">;</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">b.getWin</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">tinymce</span><span class="PUNC">=</span><span class="NAME">a.tinymce</span><span class="PUNC">;</span><span class="NAME">tinyMCE</span><span class="PUNC">=</span><span class="NAME">a.tinyMCE</span><span class="PUNC">;</span><span class="NAME">b.editor</span><span class="PUNC">=</span><span class="NAME">tinymce.EditorManager.activeEditor</span><span class="PUNC">;</span><span class="NAME">b.params</span><span class="PUNC">=</span><span class="NAME">b.editor.windowManager.params</span><span class="PUNC">;</span><span class="NAME">b.features</span><span class="PUNC">=</span><span class="NAME">b.editor.windowManager.features</span><span class="PUNC">;</span><span class="NAME">b.dom</span><span class="PUNC">=</span><span class="NAME">b.editor.windowManager.createInstance</span><span class="PUNC">(</span><span class="STRN">"tinymce.dom.DOMUtils"</span><span class="PUNC">,</span><span class="NAME">document</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">ownEvents</span><span class="PUNC">:</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">proxy</span><span class="PUNC">:</span><span class="NAME">tinyMCEPopup._eventProxy</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">b.dom.bind</span><span class="PUNC">(</span><span class="NAME">window</span><span class="PUNC">,</span><span class="STRN">"ready"</span><span class="PUNC">,</span><span class="NAME">b._onDOMLoaded</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b.features.popup_css</span><span class="PUNC">!==</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b.dom.loadCSS</span><span class="PUNC">(</span><span class="NAME">b.features.popup_css</span><span class="PUNC">||</span><span class="NAME">b.editor.settings.popup_css</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">b.listeners</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">b.onInit</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">add</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b.listeners.push</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">func</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">scope</span><span class="PUNC">:</span><span class="NAME">d</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">b.isWindow</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NAME">b.getWindowArg</span><span class="PUNC">(</span><span class="STRN">"mce_inline"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">b.id</span><span class="PUNC">=</span><span class="NAME">b.getWindowArg</span><span class="PUNC">(</span><span class="STRN">"mce_window_id"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">b.editor.windowManager.onOpen.dispatch</span><span class="PUNC">(</span><span class="NAME">b.editor.windowManager</span><span class="PUNC">,</span><span class="NAME">window</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getWin</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">window.frameElement</span><span class="PUNC">&&</span><span class="NAME">window.dialogArguments</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">opener</span><span class="PUNC">||</span><span class="NAME">parent</span><span class="PUNC">||</span><span class="NAME">top</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getWindowArg</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">this.params</span><span class="PUNC">[</span><span class="NAME">c</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">tinymce.is</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">a</span><span class="PUNC">:</span><span class="NAME">b</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getParam</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.editor.getParam</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getLang</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.editor.getLang</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">execCommand</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b</span><span class="PUNC">=</span><span class="NAME">b</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">b.skip_focus</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">this.restoreSelection</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.editor.execCommand</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">resizeToInnerSize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b</span><span class="PUNC">=</span><span class="NAME">a.dom.getViewPort</span><span class="PUNC">(</span><span class="NAME">window</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">a.editor.windowManager.resizeBy</span><span class="PUNC">(</span><span class="NAME">a.getWindowArg</span><span class="PUNC">(</span><span class="STRN">"mce_width"</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">b.w</span><span class="PUNC">,</span><span class="NAME">a.getWindowArg</span><span class="PUNC">(</span><span class="STRN">"mce_height"</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">b.h</span><span class="PUNC">,</span><span class="NAME">a.id</span><span class="PUNC">||</span><span class="NAME">window</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">executeOnLoad</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.onInit.add</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">eval</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">storeSelection</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.editor.windowManager.bookmark</span><span class="PUNC">=</span><span class="NAME">tinyMCEPopup.editor.selection.getBookmark</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">restoreSelection</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">tinyMCEPopup</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">a.isWindow</span><span class="PUNC">&&</span><span class="NAME">tinymce.isIE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">a.editor.selection.moveToBookmark</span><span class="PUNC">(</span><span class="NAME">a.editor.windowManager.bookmark</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">requireLangPack</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">b.getWindowArg</span><span class="PUNC">(</span><span class="STRN">"plugin_url"</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">b.getWindowArg</span><span class="PUNC">(</span><span class="STRN">"theme_url"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">&&</span><span class="NAME">b.editor.settings.language</span><span class="PUNC">&&</span><span class="NAME">b.features.translate_i18n</span><span class="PUNC">!==</span><span class="KEYW">false</span><span class="PUNC">&&</span><span class="NAME">b.editor.settings.language_load</span><span class="PUNC">!==</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">a</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="STRN">"/langs/"</span><span class="PUNC">+</span><span class="NAME">b.editor.settings.language</span><span class="PUNC">+</span><span class="STRN">"_dlg.js"</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">tinymce.ScriptLoader.isDone</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">document.write</span><span class="PUNC">(</span><span class="STRN">'&lt;script type="text/javascript" src="'</span><span class="PUNC">+</span><span class="NAME">tinymce._addVer</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">'">&lt;\/script>'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">tinymce.ScriptLoader.markDone</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">pickColor</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.execCommand</span><span class="PUNC">(</span><span class="STRN">"mceColorPicker"</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">color</span><span class="PUNC">:</span><span class="NAME">document.getElementById</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">value</span><span class="PUNC">,</span><span class="NAME">func</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">document.getElementById</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">value</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">;</span><span class="KEYW">try</span><span class="PUNC">{</span><span class="NAME">document.getElementById</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">onchange</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">catch</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">openBrowser</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">tinyMCEPopup.restoreSelection</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.editor.execCallback</span><span class="PUNC">(</span><span class="STRN">"file_browser_callback"</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">document.getElementById</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">value</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">window</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">confirm</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.editor.windowManager.confirm</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">window</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">alert</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.editor.windowManager.alert</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">window</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">close</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">b</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">a.editor.windowManager.close</span><span class="PUNC">(</span><span class="NAME">window</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">tinymce</span><span class="PUNC">=</span><span class="NAME">tinyMCE</span><span class="PUNC">=</span><span class="NAME">a.editor</span><span class="PUNC">=</span><span class="NAME">a.params</span><span class="PUNC">=</span><span class="NAME">a.dom</span><span class="PUNC">=</span><span class="NAME">a.dom.doc</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">tinymce.isOpera</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">a.getWin</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">b</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_restoreSelection</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">window.event.srcElement</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">a.nodeName</span><span class="PUNC">==</span><span class="STRN">"INPUT"</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">a.type</span><span class="PUNC">==</span><span class="STRN">"submit"</span><span class="PUNC">||</span><span class="NAME">a.type</span><span class="PUNC">==</span><span class="STRN">"button"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">tinyMCEPopup.restoreSelection</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_onDOMLoaded</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b</span><span class="PUNC">=</span><span class="NAME">tinyMCEPopup</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">document.title</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b.features.translate_i18n</span><span class="PUNC">!==</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">c</span><span class="PUNC">=</span><span class="NAME">document.body.innerHTML</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">tinymce.isIE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">c</span><span class="PUNC">=</span><span class="NAME">c.replace</span><span class="PUNC">(</span><span class="REGX">/ (value|title|alt)=([^"][^\s>]+)/gi</span><span class="PUNC">,</span><span class="STRN">' $1="$2"'</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">document.dir</span><span class="PUNC">=</span><span class="NAME">b.editor.getParam</span><span class="PUNC">(</span><span class="STRN">"directionality"</span><span class="PUNC">,</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">b.editor.translate</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">a</span><span class="PUNC">!=</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">document.body.innerHTML</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">b.editor.translate</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">a</span><span class="PUNC">!=</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">document.title</span><span class="PUNC">=</span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">b.editor.getParam</span><span class="PUNC">(</span><span class="STRN">"browser_preferred_colors"</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">b.isWindow</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b.dom.addClass</span><span class="PUNC">(</span><span class="NAME">document.body</span><span class="PUNC">,</span><span class="STRN">"forceColors"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">document.body.style.display</span><span class="PUNC">=</span><span class="STRN">""</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">tinymce.isIE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">document.attachEvent</span><span class="PUNC">(</span><span class="STRN">"onmouseup"</span><span class="PUNC">,</span><span class="NAME">tinyMCEPopup._restoreSelection</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">b.dom.add</span><span class="PUNC">(</span><span class="NAME">b.dom.select</span><span class="PUNC">(</span><span class="STRN">"head"</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="STRN">"base"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">target</span><span class="PUNC">:</span><span class="STRN">"_self"</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">b.restoreSelection</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">b.resizeToInnerSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">b.isWindow</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b.editor.windowManager.setTitle</span><span class="PUNC">(</span><span class="NAME">window</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">window.focus</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">tinymce.isIE</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">b.isWindow</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b.dom.bind</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">,</span><span class="STRN">"focus"</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b.editor.windowManager.focus</span><span class="PUNC">(</span><span class="NAME">b.id</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">tinymce.each</span><span class="PUNC">(</span><span class="NAME">b.dom.select</span><span class="PUNC">(</span><span class="STRN">"select"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">f.onkeydown</span><span class="PUNC">=</span><span class="NAME">tinyMCEPopup._accessHandler</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">tinymce.each</span><span class="PUNC">(</span><span class="NAME">b.listeners</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">f.func.call</span><span class="PUNC">(</span><span class="NAME">f.scope</span><span class="PUNC">,</span><span class="NAME">b.editor</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b.getWindowArg</span><span class="PUNC">(</span><span class="STRN">"mce_auto_focus"</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">window.focus</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">tinymce.each</span><span class="PUNC">(</span><span class="NAME">document.forms</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">tinymce.each</span><span class="PUNC">(</span><span class="NAME">g.elements</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b.dom.hasClass</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">,</span><span class="STRN">"mceFocus"</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">f.disabled</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">f.focus</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">document.onkeyup</span><span class="PUNC">=</span><span class="NAME">tinyMCEPopup._closeWinKeyHandler</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_accessHandler</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">||</span><span class="NAME">window.event</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">a.keyCode</span><span class="PUNC">==</span><span class="NUMB">13</span><span class="PUNC">||</span><span class="NAME">a.keyCode</span><span class="PUNC">==</span><span class="NUMB">32</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b</span><span class="PUNC">=</span><span class="NAME">a.target</span><span class="PUNC">||</span><span class="NAME">a.srcElement</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b.onchange</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b.onchange</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">tinymce.dom.Event.cancel</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_closeWinKeyHandler</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">||</span><span class="NAME">window.event</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">a.keyCode</span><span class="PUNC">==</span><span class="NUMB">27</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">tinyMCEPopup.close</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">_eventProxy</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">tinyMCEPopup.dom.events.callNativeHandler</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">tinyMCEPopup.init</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span></pre></body></html>