<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.line {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class="line">  1</span> <span class="COMM">/*
<span class="line">  2</span>  * ***** BEGIN LICENSE BLOCK *****
<span class="line">  3</span>  * Zimbra Collaboration Suite Web Client
<span class="line">  4</span>  * Copyright (C) 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014 Zimbra, Inc.
<span class="line">  5</span>  * 
<span class="line">  6</span>  * The contents of this file are subject to the Common Public Attribution License Version 1.0 (the &#34;License&#34;);
<span class="line">  7</span>  * you may not use this file except in compliance with the License. 
<span class="line">  8</span>  * You may obtain a copy of the License at: http://www.zimbra.com/license
<span class="line">  9</span>  * The License is based on the Mozilla Public License Version 1.1 but Sections 14 and 15 
<span class="line"> 10</span>  * have been added to cover use of software over a computer network and provide for limited attribution 
<span class="line"> 11</span>  * for the Original Developer. In addition, Exhibit A has been modified to be consistent with Exhibit B. 
<span class="line"> 12</span>  * 
<span class="line"> 13</span>  * Software distributed under the License is distributed on an &#34;AS IS&#34; basis, 
<span class="line"> 14</span>  * WITHOUT WARRANTY OF ANY KIND, either express or implied. 
<span class="line"> 15</span>  * See the License for the specific language governing rights and limitations under the License. 
<span class="line"> 16</span>  * The Original Code is Zimbra Open Source Web Client. 
<span class="line"> 17</span>  * The Initial Developer of the Original Code is Zimbra, Inc. 
<span class="line"> 18</span>  * All portions of the code are Copyright (C) 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014 Zimbra, Inc. All Rights Reserved. 
<span class="line"> 19</span>  * ***** END LICENSE BLOCK *****
<span class="line"> 20</span>  */</span><span class="WHIT">
<span class="line"> 21</span> 
<span class="line"> 22</span> </span><span class="COMM">/**
<span class="line"> 23</span> * show history of the status window
<span class="line"> 24</span> * @param parent			the element that created this view
<span class="line"> 25</span>  * @private
<span class="line"> 26</span> */</span><span class="WHIT">
<span class="line"> 27</span> </span><span class="NAME">ZmReminderDialog</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">reminderController</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">calController</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">apptType</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line"> 28</span> 
<span class="line"> 29</span> </span><span class="WHIT">	</span><span class="COMM">// init custom buttons</span><span class="WHIT">
<span class="line"> 30</span> </span><span class="WHIT">    </span><span class="NAME">this._apptType</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">apptType</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 31</span> 
<span class="line"> 32</span> </span><span class="WHIT">	</span><span class="NAME">this.ALL_APPTS</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;ALL&#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">apptType</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 33</span> 
<span class="line"> 34</span> </span><span class="WHIT">	</span><span class="COMM">// call base class</span><span class="WHIT">
<span class="line"> 35</span> </span><span class="WHIT">	</span><span class="NAME">DwtDialog.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">id</span><span class="PUNC">:</span><span class="STRN">&#34;ZmReminderDialog_&#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">apptType</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">parent</span><span class="PUNC">:</span><span class="NAME">parent</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">standardButtons</span><span class="PUNC">:</span><span class="NAME">DwtDialog.NO_BUTTONS</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 36</span> 
<span class="line"> 37</span> </span><span class="WHIT">	</span><span class="NAME">this._reminderController</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">reminderController</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 38</span> </span><span class="WHIT">	</span><span class="NAME">this._calController</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">calController</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 39</span> 
<span class="line"> 40</span> </span><span class="WHIT">	</span><span class="NAME">this._listId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Dwt.getNextId</span><span class="PUNC">(</span><span class="STRN">&#34;ZmReminderDialogContent&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 41</span> 
<span class="line"> 42</span> </span><span class="WHIT">    </span><span class="NAME">this.setContent</span><span class="PUNC">(</span><span class="NAME">this._contentHtml</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 43</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._calController</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">ZmTaskMgr</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line"> 44</span> </span><span class="WHIT">        </span><span class="NAME">this.setTitle</span><span class="PUNC">(</span><span class="NAME">ZmMsg.taskReminders</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 45</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line"> 46</span> </span><span class="WHIT">        </span><span class="NAME">this.setTitle</span><span class="PUNC">(</span><span class="NAME">ZmMsg.apptReminders</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 47</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line"> 48</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 49</span> 
<span class="line"> 50</span> </span><span class="NAME">ZmReminderDialog.prototype</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">DwtDialog</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 51</span> </span><span class="NAME">ZmReminderDialog.prototype.constructor</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ZmReminderDialog</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 52</span> 
<span class="line"> 53</span> 
<span class="line"> 54</span> </span><span class="COMM">// Consts</span><span class="WHIT">
<span class="line"> 55</span> 
<span class="line"> 56</span> </span><span class="NAME">ZmReminderDialog.SOON</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NAME">AjxDateUtil.MSEC_PER_FIFTEEN_MINUTES</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 57</span> 
<span class="line"> 58</span> </span><span class="COMM">// Public methods</span><span class="WHIT">
<span class="line"> 59</span> 
<span class="line"> 60</span> </span><span class="NAME">ZmReminderDialog.prototype.toString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line"> 61</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line"> 62</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="STRN">&#34;ZmReminderDialog&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 63</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 64</span> 
<span class="line"> 65</span> </span><span class="NAME">ZmReminderDialog.prototype.popup</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line"> 66</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line"> 67</span> </span><span class="WHIT">	</span><span class="NAME">DwtDialog.prototype.popup.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 68</span> </span><span class="WHIT">	</span><span class="NAME">this._cancelSnooze</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 69</span> 
<span class="line"> 70</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">appCtxt.get</span><span class="PUNC">(</span><span class="NAME">ZmSetting.CAL_REMINDER_NOTIFY_BROWSER</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line"> 71</span> </span><span class="WHIT">        </span><span class="NAME">AjxPackage.require</span><span class="PUNC">(</span><span class="STRN">&#34;Alert&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 72</span> </span><span class="WHIT">        </span><span class="NAME">ZmBrowserAlert.getInstance</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">start</span><span class="PUNC">(</span><span class="NAME">ZmMsg.reminders</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 73</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line"> 74</span> 
<span class="line"> 75</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">appCtxt.get</span><span class="PUNC">(</span><span class="NAME">ZmSetting.CAL_REMINDER_NOTIFY_SOUNDS</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line"> 76</span> </span><span class="WHIT">        </span><span class="NAME">AjxPackage.require</span><span class="PUNC">(</span><span class="STRN">&#34;Alert&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 77</span> </span><span class="WHIT">        </span><span class="NAME">ZmSoundAlert.getInstance</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">start</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 78</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line"> 79</span> 
<span class="line"> 80</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">appCtxt.get</span><span class="PUNC">(</span><span class="NAME">ZmSetting.CAL_REMINDER_NOTIFY_TOASTER</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line"> 81</span> </span><span class="WHIT">        </span><span class="NAME">AjxPackage.require</span><span class="PUNC">(</span><span class="STRN">&#34;Alert&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 82</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">winText</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 83</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">appts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._list.getArray</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 84</span> </span><span class="WHIT">        </span><span class="COMM">// only show, at most, five appointment reminders</span><span class="WHIT">
<span class="line"> 85</span> </span><span class="WHIT">        </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">appts.length</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NUMB">5</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line"> 86</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">appt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appts</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 87</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">startDelta</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._computeDelta</span><span class="PUNC">(</span><span class="NAME">appt</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 88</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">delta</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">startDelta</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">this._formatDeltaString</span><span class="PUNC">(</span><span class="NAME">startDelta</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">appt.isAllDayEvent</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 89</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">text</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">appt.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;, &#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._getDurationText</span><span class="PUNC">(</span><span class="NAME">appt</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;\n(&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">delta</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;)&#34;</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">join</span><span class="PUNC">(</span><span class="STRN">&#34;&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 90</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">AjxEnv.isMac</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line"> 91</span> </span><span class="WHIT">                </span><span class="NAME">ZmDesktopAlert.getInstance</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">start</span><span class="PUNC">(</span><span class="NAME">ZmMsg.reminders</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">text</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 92</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">AjxEnv.isWindows</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line"> 93</span> </span><span class="WHIT">                </span><span class="NAME">winText.push</span><span class="PUNC">(</span><span class="NAME">text</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 94</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line"> 95</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class="line"> 96</span> 
<span class="line"> 97</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">AjxEnv.isWindows</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">winText.length</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line"> 98</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">appts.length</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NUMB">5</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line"> 99</span> </span><span class="WHIT">                </span><span class="NAME">winText.push</span><span class="PUNC">(</span><span class="NAME">ZmMsg.andMore</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">100</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">101</span> </span><span class="WHIT">            </span><span class="NAME">ZmDesktopAlert.getInstance</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">start</span><span class="PUNC">(</span><span class="NAME">ZmMsg.reminders</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">winText.join</span><span class="PUNC">(</span><span class="STRN">&#34;\n&#34;</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">102</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">103</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">104</span> 
<span class="line">105</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">106</span> 
<span class="line">107</span> </span><span class="NAME">ZmReminderDialog.prototype.initialize</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">108</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">list</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">109</span> </span><span class="WHIT">	</span><span class="NAME">this._list</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">AjxVector</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">110</span> </span><span class="WHIT">	</span><span class="NAME">this._apptData</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">111</span> 
<span class="line">112</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">html</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">113</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">idx</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">114</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">size</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">list.size</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">115</span> 
<span class="line">116</span> </span><span class="WHIT">    </span><span class="NAME">AjxDebug.println</span><span class="PUNC">(</span><span class="NAME">AjxDebug.REMINDER</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;---Reminders [&#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">&#34;]---&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">117</span> 
<span class="line">118</span> </span><span class="WHIT">	</span><span class="NAME">html</span><span class="PUNC">[</span><span class="NAME">idx</span><span class="PUNC">++</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;&lt;table style=&#39;min-width:375px&#39;&gt;&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">119</span> </span><span class="WHIT">	</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">size</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">120</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">appt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">list.get</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">121</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">appt.isShared</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">appt.isReadOnly</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="KEYW">continue</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">122</span> </span><span class="WHIT">        </span><span class="NAME">this._list.add</span><span class="PUNC">(</span><span class="NAME">appt</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">123</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appt.getUniqueId</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">124</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">data</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._apptData</span><span class="PUNC">[</span><span class="NAME">uid</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">appt</span><span class="PUNC">:</span><span class="NAME">appt</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">125</span> </span><span class="WHIT">		</span><span class="NAME">idx</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._addAppt</span><span class="PUNC">(</span><span class="NAME">html</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">idx</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">appt</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">data</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">126</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">127</span> </span><span class="WHIT">	</span><span class="NAME">html</span><span class="PUNC">[</span><span class="NAME">idx</span><span class="PUNC">++</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;&lt;/table&gt;&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">128</span> 
<span class="line">129</span> </span><span class="WHIT">	</span><span class="NAME">this._addAllSection</span><span class="PUNC">(</span><span class="NAME">html</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">idx</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">130</span> 
<span class="line">131</span> </span><span class="WHIT">	</span><span class="COMM">// cleanup before using</span><span class="WHIT">
<span class="line">132</span> </span><span class="WHIT">	</span><span class="NAME">this._cleanupButtons</span><span class="PUNC">(</span><span class="NAME">this._dismissButtons</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">133</span> </span><span class="WHIT">	</span><span class="NAME">this._cleanupButtons</span><span class="PUNC">(</span><span class="NAME">this._openButtons</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">134</span> </span><span class="WHIT">	</span><span class="NAME">this._cleanupButtons</span><span class="PUNC">(</span><span class="NAME">this._snoozeButtons</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">135</span> </span><span class="WHIT">	</span><span class="NAME">this._cleanupButtons</span><span class="PUNC">(</span><span class="NAME">this._snoozeSelectButtons</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">136</span> </span><span class="WHIT">	</span><span class="NAME">this._cleanupButtons</span><span class="PUNC">(</span><span class="NAME">this._snoozeSelectInputs</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">137</span> </span><span class="WHIT">	</span><span class="NAME">this._dismissButtons</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">138</span> </span><span class="WHIT">	</span><span class="NAME">this._openButtons</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//those are link buttons  (the reminder name is now a link)</span><span class="WHIT">
<span class="line">139</span> </span><span class="WHIT">	</span><span class="NAME">this._snoozeButtons</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">140</span> </span><span class="WHIT">	</span><span class="NAME">this._snoozeSelectButtons</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">141</span> </span><span class="WHIT">	</span><span class="NAME">this._snoozeSelectInputs</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">142</span> 
<span class="line">143</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">dismissListener</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">AjxListener</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._dismissButtonListener</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">144</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">openListener</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">AjxListener</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._openButtonListener</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">145</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">snoozeListener</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._snoozeButtonListener.bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">146</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">snoozeSelectButtonListener</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._snoozeSelectButtonListener.bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">147</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">snoozeSelectMenuListener</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._snoozeSelectMenuListener.bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">148</span> 
<span class="line">149</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">div</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.getElementById</span><span class="PUNC">(</span><span class="NAME">this._listId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">150</span> </span><span class="WHIT">	</span><span class="NAME">div.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">html.join</span><span class="PUNC">(</span><span class="STRN">&#34;&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">151</span> 
<span class="line">152</span> </span><span class="WHIT">	</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">this._list.size</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">153</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">appt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._list.get</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">154</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appt.getUniqueId</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">155</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appt.id</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">156</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">data</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._apptData</span><span class="PUNC">[</span><span class="NAME">uid</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">157</span> 
<span class="line">158</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">alarmData</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appt.getAlarmData</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">159</span> </span><span class="WHIT">        </span><span class="NAME">alarmData</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">alarmData</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">alarmData.length</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">alarmData</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">160</span> </span><span class="WHIT">        </span><span class="COMM">//bug: 60692 - Add troubleshooting code for late reminders</span><span class="WHIT">
<span class="line">161</span> </span><span class="WHIT">        </span><span class="NAME">AjxDebug.println</span><span class="PUNC">(</span><span class="NAME">AjxDebug.REMINDER</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">appt.getReminderName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">&#34; : &#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">alarmData.nextAlarm</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="STRN">&#34; NA &#34;</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">&#34; / &#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">alarmData.alarmInstStart</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="STRN">&#34; NA &#34;</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">162</span> 
<span class="line">163</span> </span><span class="WHIT">		</span><span class="NAME">this._createButtons</span><span class="PUNC">(</span><span class="NAME">uid</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">dismissListener</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">openListener</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">snoozeListener</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">snoozeSelectButtonListener</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">snoozeSelectMenuListener</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">164</span> 
<span class="line">165</span> </span><span class="WHIT">		</span><span class="NAME">this._updateDelta</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">166</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">167</span> 
<span class="line">168</span> </span><span class="WHIT">	</span><span class="NAME">this._createButtons</span><span class="PUNC">(</span><span class="NAME">this.ALL_APPTS</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.ALL_APPTS</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">dismissListener</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">openListener</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">snoozeListener</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">snoozeSelectButtonListener</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">snoozeSelectMenuListener</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">169</span> 
<span class="line">170</span> </span><span class="WHIT">	</span><span class="NAME">this._updateIndividualSnoozeActionsVisibility</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">171</span> 
<span class="line">172</span> </span><span class="WHIT">	</span><span class="COMM">//hide the separator from the dialog buttons since we do not use dialog buttons for this dialog.</span><span class="WHIT">
<span class="line">173</span> </span><span class="WHIT">	</span><span class="NAME">document.getElementById</span><span class="PUNC">(</span><span class="NAME">this._htmlElId</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">&#34;_buttonsSep&#34;</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">style.display</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;none&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">174</span> 
<span class="line">175</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">176</span> 
<span class="line">177</span> 
<span class="line">178</span> </span><span class="NAME">ZmReminderDialog.prototype._createButtons</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">179</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">uid</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">dismissListener</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">openListener</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">snoozeListener</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">snoozeSelectButtonListener</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">snoozeSelectMenuListener</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">180</span> </span><span class="WHIT">	</span><span class="COMM">//id should probably not be used, and only uid should - but I&#39;m afraid it would confuse seleniun. This was added for bug 62376</span><span class="WHIT">
<span class="line">181</span> 
<span class="line">182</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">data</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._apptData</span><span class="PUNC">[</span><span class="NAME">uid</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">183</span> 
<span class="line">184</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">this.ALL_APPTS</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">&#34;ZButton&#34;</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;DwtToolbarButton&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">185</span> </span><span class="WHIT">	</span><span class="COMM">// dismiss button</span><span class="WHIT">
<span class="line">186</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">dismissBtn</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._dismissButtons</span><span class="PUNC">[</span><span class="NAME">uid</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">DwtButton</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">id</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;dismissBtn_&#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">parent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">className</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">className</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">parentElement</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.dismissBtnId</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">187</span> </span><span class="WHIT">	</span><span class="NAME">dismissBtn.setText</span><span class="PUNC">(</span><span class="NAME">ZmMsg.dismiss</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">188</span> </span><span class="WHIT">	</span><span class="NAME">dismissBtn.addSelectionListener</span><span class="PUNC">(</span><span class="NAME">dismissListener</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">189</span> </span><span class="WHIT">	</span><span class="NAME">dismissBtn.apptUid</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">190</span> 
<span class="line">191</span> </span><span class="WHIT">	</span><span class="COMM">// snoooze button</span><span class="WHIT">
<span class="line">192</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">snoozeSelectBtn</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._snoozeSelectButtons</span><span class="PUNC">[</span><span class="NAME">uid</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">DwtButton</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">id</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;snoozeSelectBtn_&#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">parent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">className</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;DwtToolbarButton&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">parentElement</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.snoozeSelectBtnId</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">193</span> </span><span class="WHIT">	</span><span class="NAME">snoozeSelectBtn.apptUid</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">194</span> </span><span class="WHIT">	</span><span class="NAME">snoozeSelectBtn.addDropDownSelectionListener</span><span class="PUNC">(</span><span class="NAME">snoozeSelectButtonListener</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">195</span> 
<span class="line">196</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">snoozeBtn</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._snoozeButtons</span><span class="PUNC">[</span><span class="NAME">uid</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">DwtButton</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">id</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;snoozeBtn_&#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">parent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">className</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">className</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">parentElement</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.snoozeBtnId</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">197</span> </span><span class="WHIT">	</span><span class="NAME">snoozeBtn.setText</span><span class="PUNC">(</span><span class="NAME">ZmMsg.snooze</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">198</span> </span><span class="WHIT">	</span><span class="NAME">snoozeBtn.addSelectionListener</span><span class="PUNC">(</span><span class="NAME">snoozeListener</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">199</span> </span><span class="WHIT">	</span><span class="NAME">snoozeBtn.apptUid</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">200</span> 
<span class="line">201</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">params</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">202</span> </span><span class="WHIT">		</span><span class="NAME">parent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">203</span> </span><span class="WHIT">		</span><span class="NAME">parentElement</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.snoozeSelectInputId</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">204</span> </span><span class="WHIT">		</span><span class="NAME">type</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">DwtInputField.STRING</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">205</span> </span><span class="WHIT">		</span><span class="NAME">errorIconStyle</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">DwtInputField.ERROR_ICON_NONE</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">206</span> </span><span class="WHIT">		</span><span class="NAME">validationStyle</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">DwtInputField.CONTINUAL_VALIDATION</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">207</span> </span><span class="WHIT">		</span><span class="NAME">className</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;DwtInputField ReminderInput&#34;</span><span class="WHIT">
<span class="line">208</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">209</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">snoozeSelectInput</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._snoozeSelectInputs</span><span class="PUNC">[</span><span class="NAME">uid</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">DwtInputField</span><span class="PUNC">(</span><span class="NAME">params</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">210</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">snoozeSelectInputEl</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">snoozeSelectInput.getInputElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">211</span> </span><span class="WHIT">	</span><span class="NAME">Dwt.setSize</span><span class="PUNC">(</span><span class="NAME">snoozeSelectInputEl</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;120px&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;2rem&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">212</span> 
<span class="line">213</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">appt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">data.appt</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">214</span> </span><span class="WHIT">	</span><span class="NAME">this._createSnoozeMenu</span><span class="PUNC">(</span><span class="NAME">snoozeSelectBtn</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">snoozeSelectInput</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">snoozeSelectMenuListener</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">this.ALL_APPTS</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">this._list</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">appt</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">215</span> 
<span class="line">216</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">uid</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">this.ALL_APPTS</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">217</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">218</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">219</span> 
<span class="line">220</span> </span><span class="WHIT">	</span><span class="COMM">// open button</span><span class="WHIT">
<span class="line">221</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">openBtn</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._openButtons</span><span class="PUNC">[</span><span class="NAME">uid</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">DwtLinkButton</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">id</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;openBtn_&#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">parent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">parentElement</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.openLinkId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">noDropDown</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">222</span> </span><span class="WHIT">	</span><span class="NAME">openBtn.setText</span><span class="PUNC">(</span><span class="NAME">AjxStringUtil.htmlEncode</span><span class="PUNC">(</span><span class="NAME">appt.getReminderName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">223</span> </span><span class="WHIT">	</span><span class="NAME">openBtn.addSelectionListener</span><span class="PUNC">(</span><span class="NAME">openListener</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">224</span> </span><span class="WHIT">	</span><span class="NAME">openBtn.apptUid</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">225</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">226</span> 
<span class="line">227</span> </span><span class="NAME">ZmReminderDialog.prototype._cleanupButtons</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">228</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">buttons</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">229</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">buttons</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">230</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">231</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">232</span> </span><span class="WHIT">	</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">id</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">buttons</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">233</span> </span><span class="WHIT">		</span><span class="NAME">buttons</span><span class="PUNC">[</span><span class="NAME">id</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">dispose</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">234</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">235</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">236</span> 
<span class="line">237</span> </span><span class="NAME">ZmReminderDialog.prototype._contentHtml</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">238</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">239</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="STRN">&#34;&lt;div class=&#39;ZmReminderDialog&#39; id=&#39;&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._listId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;&#39;&gt;&#34;</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">join</span><span class="PUNC">(</span><span class="STRN">&#34;&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">240</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">241</span> 
<span class="line">242</span> 
<span class="line">243</span> </span><span class="NAME">ZmReminderDialog.DEFAULT_SNOOZE</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">5</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">244</span> </span><span class="NAME">ZmReminderDialog.SNOOZE_MINUTES</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">245</span> </span><span class="COMM">// Snooze period in minutes (negative is &#39;minutes before appt&#39;, zero is separator:</span><span class="WHIT">
<span class="line">246</span> </span><span class="WHIT">    </span><span class="PUNC">[</span><span class="PUNC">-</span><span class="NUMB">30</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">15</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">5</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">247</span> </span><span class="WHIT">       </span><span class="NUMB">1</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">5</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">10</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">15</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">30</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">45</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">60</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">120</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">240</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">480</span><span class="PUNC">,</span><span class="WHIT">  </span><span class="NUMB">1440</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">2880</span><span class="PUNC">,</span><span class="WHIT">  </span><span class="NUMB">4320</span><span class="PUNC">,</span><span class="WHIT">   </span><span class="NUMB">5760</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">10080</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">20160</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">248</span> </span><span class="COMM">//                          1hr  2hr  4hr  8hr  1day  2days  3days  4days  1week  2weeks</span><span class="WHIT">
<span class="line">249</span> 
<span class="line">250</span> </span><span class="COMM">// Snooze period in msec (Entries must match SNOOZE_MINUTES)</span><span class="WHIT">
<span class="line">251</span> </span><span class="NAME">ZmReminderDialog.SNOOZE_MSEC</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">252</span> </span><span class="WHIT">    </span><span class="PUNC">[</span><span class="WHIT">  </span><span class="PUNC">-</span><span class="NUMB">30</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT">   </span><span class="PUNC">-</span><span class="NUMB">15</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT">  </span><span class="PUNC">-</span><span class="NUMB">5</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT">    </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT">            </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">253</span> </span><span class="WHIT">         </span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT">     </span><span class="NUMB">5</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT">  </span><span class="NUMB">10</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT">    </span><span class="NUMB">15</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT">   </span><span class="NUMB">30</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT">    </span><span class="NUMB">45</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT">   </span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">254</span> </span><span class="WHIT">       </span><span class="NUMB">120</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT">   </span><span class="NUMB">240</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">480</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT">  </span><span class="NUMB">1440</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">2880</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT">  </span><span class="NUMB">4320</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">5760</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">255</span> </span><span class="WHIT">     </span><span class="NUMB">10080</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">20160</span><span class="PUNC">*</span><span class="NUMB">60</span><span class="PUNC">*</span><span class="NUMB">1000</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">256</span> 
<span class="line">257</span> </span><span class="COMM">// Minutes per:                   minute hour  day   week   endMarker</span><span class="WHIT">
<span class="line">258</span> </span><span class="NAME">ZmReminderDialog.SCALE_MINUTES</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="WHIT">   </span><span class="NUMB">1</span><span class="PUNC">,</span><span class="WHIT">   </span><span class="NUMB">60</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">1440</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">10080</span><span class="PUNC">,</span><span class="WHIT">   </span><span class="NUMB">1000000</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">259</span> 
<span class="line">260</span> </span><span class="NAME">ZmReminderDialog.prototype._createSnoozeMenu</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">261</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">snoozeSelectButton</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">snoozeSelectInput</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">menuSelectionListener</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">apptList</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">262</span> </span><span class="WHIT">    </span><span class="COMM">// create menu for button</span><span class="WHIT">
<span class="line">263</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">snoozeMenu</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">DwtMenu</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">parent</span><span class="PUNC">:</span><span class="NAME">snoozeSelectButton</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">style</span><span class="PUNC">:</span><span class="NAME">DwtMenu.DROPDOWN_STYLE</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">264</span> </span><span class="WHIT">    </span><span class="NAME">snoozeMenu.setSize</span><span class="PUNC">(</span><span class="STRN">&#34;150&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">265</span> </span><span class="WHIT">    </span><span class="NAME">snoozeSelectButton.setMenu</span><span class="PUNC">(</span><span class="NAME">snoozeMenu</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">266</span> 
<span class="line">267</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">appts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">AjxUtil.toArray</span><span class="PUNC">(</span><span class="NAME">apptList</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">268</span> 
<span class="line">269</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">maxStartDelta</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NAME">Infinity</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//It was called minStartDelta which was true if you think of the absolute value (as it is negative). But it&#39;s actually max.</span><span class="WHIT">
<span class="line">270</span> 
<span class="line">271</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._apptType</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">&#34;task&#34;</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">272</span> </span><span class="WHIT">        </span><span class="COMM">// Tasks are simpler: No &#39;before&#39; times allowed, and all fixed times are allowed</span><span class="WHIT">
<span class="line">273</span> </span><span class="WHIT">        </span><span class="NAME">maxStartDelta</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">274</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">275</span> </span><span class="WHIT">	</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">276</span> </span><span class="WHIT">        </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">appts.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">277</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">appt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appts</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">278</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">startDelta</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._computeDelta</span><span class="PUNC">(</span><span class="NAME">appt</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">279</span> </span><span class="WHIT">			</span><span class="NAME">maxStartDelta</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">startDelta</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">maxStartDelta</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">280</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">281</span> </span><span class="WHIT">		</span><span class="COMM">//if maxStartDelta is &gt;= 0, there was at least one appt that is already started, in which case for the aggregate &#34;snooze&#34; we do not show any &#34;before&#34; item</span><span class="WHIT">
<span class="line">282</span> </span><span class="WHIT">		</span><span class="NAME">maxStartDelta</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">maxStartDelta</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//don&#39;t get positive - we don&#39;t care about that later in the loop below. We want max to be 0.</span><span class="WHIT">
<span class="line">283</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">284</span> 
<span class="line">285</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">snoozeFormatter</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">286</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">snoozeFormatterBefore</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">AjxMessageFormat</span><span class="PUNC">(</span><span class="NAME">ZmMsg.apptRemindNMinutesBefore</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Before Appt Formatter</span><span class="WHIT">
<span class="line">287</span> </span><span class="WHIT">    </span><span class="NAME">snoozeFormatter</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">AjxMessageFormat</span><span class="PUNC">(</span><span class="NAME">ZmMsg.reminderSnoozeMinutes</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">       </span><span class="COMM">// Minute Formatter</span><span class="WHIT">
<span class="line">288</span> </span><span class="WHIT">    </span><span class="NAME">snoozeFormatter</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">AjxMessageFormat</span><span class="PUNC">(</span><span class="NAME">ZmMsg.reminderSnoozeHours</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">         </span><span class="COMM">// Hour   Formatter</span><span class="WHIT">
<span class="line">289</span> </span><span class="WHIT">    </span><span class="NAME">snoozeFormatter</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">AjxMessageFormat</span><span class="PUNC">(</span><span class="NAME">ZmMsg.reminderSnoozeDays</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">          </span><span class="COMM">// Day    Formatter</span><span class="WHIT">
<span class="line">290</span> </span><span class="WHIT">    </span><span class="NAME">snoozeFormatter</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">AjxMessageFormat</span><span class="PUNC">(</span><span class="NAME">ZmMsg.reminderSnoozeWeeks</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">         </span><span class="COMM">// Week   Formatter</span><span class="WHIT">
<span class="line">291</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">iFormatter</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">292</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">formatter</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">293</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">snoozeDisplayValue</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">294</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">scale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">295</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">defaultSet</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">296</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">firstMenuItem</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">297</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">addSeparator</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">298</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">anyAdded</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">299</span> </span><span class="WHIT">    </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">ZmReminderDialog.SNOOZE_MINUTES.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">300</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ZmReminderDialog.SNOOZE_MSEC</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">&gt;=</span><span class="WHIT"> </span><span class="NAME">maxStartDelta</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">301</span> </span><span class="WHIT">            </span><span class="COMM">// Found a snooze period to display</span><span class="WHIT">
<span class="line">302</span> </span><span class="WHIT">            </span><span class="NAME">snoozeDisplayValue</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ZmReminderDialog.SNOOZE_MINUTES</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">303</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">snoozeDisplayValue</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">304</span> </span><span class="WHIT">                </span><span class="COMM">// Set up to add a separator if any &#39;before&#39; time were added; do the</span><span class="WHIT">
<span class="line">305</span> </span><span class="WHIT">                </span><span class="COMM">// actual add if any fixed times are added</span><span class="WHIT">
<span class="line">306</span> </span><span class="WHIT">                </span><span class="NAME">addSeparator</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">anyAdded</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">307</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">308</span> </span><span class="WHIT">            </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">309</span> </span><span class="WHIT">                </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">addSeparator</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">310</span> </span><span class="WHIT">                    </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">DwtMenuItem</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">parent</span><span class="PUNC">:</span><span class="NAME">snoozeMenu</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">style</span><span class="PUNC">:</span><span class="NAME">DwtMenuItem.SEPARATOR_STYLE</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">311</span> </span><span class="WHIT">                    </span><span class="NAME">addSeparator</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">312</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">313</span> </span><span class="WHIT">                </span><span class="NAME">anyAdded</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">314</span> </span><span class="WHIT">                </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">snoozeDisplayValue</span><span class="WHIT"> </span><span class="PUNC">&lt;=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">315</span> </span><span class="WHIT">                    </span><span class="NAME">snoozeDisplayValue</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NAME">snoozeDisplayValue</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">316</span> </span><span class="WHIT">                    </span><span class="NAME">formatter</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">snoozeFormatterBefore</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">317</span> </span><span class="WHIT">                    </span><span class="NAME">scale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">318</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">319</span> </span><span class="WHIT">				</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">320</span> </span><span class="WHIT">                    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">snoozeDisplayValue</span><span class="WHIT"> </span><span class="PUNC">&gt;=</span><span class="WHIT"> </span><span class="NAME">ZmReminderDialog.SCALE_MINUTES</span><span class="PUNC">[</span><span class="NAME">iFormatter</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">321</span> </span><span class="WHIT">                        </span><span class="NAME">iFormatter</span><span class="PUNC">++</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">322</span> </span><span class="WHIT">                    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">323</span> </span><span class="WHIT">                    </span><span class="NAME">scale</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ZmReminderDialog.SCALE_MINUTES</span><span class="PUNC">[</span><span class="NAME">iFormatter</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">324</span> </span><span class="WHIT">                    </span><span class="NAME">formatter</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">snoozeFormatter</span><span class="PUNC">[</span><span class="NAME">iFormatter</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">325</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">326</span> </span><span class="WHIT">                </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">label</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">formatter.format</span><span class="PUNC">(</span><span class="NAME">snoozeDisplayValue</span><span class="PUNC">/</span><span class="NAME">scale</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">327</span> </span><span class="WHIT">                </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">mi</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">DwtMenuItem</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">parent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">snoozeMenu</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">style</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">DwtMenuItem.NO_STYLE</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">328</span> </span><span class="WHIT">                </span><span class="NAME">mi.setText</span><span class="PUNC">(</span><span class="NAME">label</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">329</span> </span><span class="WHIT">                </span><span class="NAME">mi.setData</span><span class="PUNC">(</span><span class="STRN">&#34;value&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">snoozeDisplayValue</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">330</span> </span><span class="WHIT">                </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">menuSelectionListener</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">mi.addSelectionListener</span><span class="PUNC">(</span><span class="NAME">menuSelectionListener</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">331</span> 
<span class="line">332</span> </span><span class="WHIT">                </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">firstMenuItem</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">333</span> </span><span class="WHIT">                    </span><span class="COMM">// Set the first item as the default</span><span class="WHIT">
<span class="line">334</span> </span><span class="WHIT">                    </span><span class="NAME">firstMenuItem</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">mi</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">335</span> </span><span class="WHIT">                    </span><span class="NAME">mi.setChecked</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">336</span> </span><span class="WHIT">                    </span><span class="NAME">snoozeSelectInput.setValue</span><span class="PUNC">(</span><span class="NAME">label</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">337</span> </span><span class="WHIT">                    </span><span class="NAME">defaultSet</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">338</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">339</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">340</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">341</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">342</span> 
<span class="line">343</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">344</span> 
<span class="line">345</span> </span><span class="NAME">ZmReminderDialog.prototype._snoozeSelectButtonListener</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">346</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ev</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">347</span> </span><span class="WHIT">	</span><span class="NAME">ev.item.popup</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">348</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">349</span> 
<span class="line">350</span> </span><span class="NAME">ZmReminderDialog.prototype._snoozeSelectMenuListener</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">351</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ev</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">352</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">ev.item</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">ev.item</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">DwtMenuItem</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">353</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">354</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">355</span> 
<span class="line">356</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">obj</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">DwtControl.getTargetControl</span><span class="PUNC">(</span><span class="NAME">ev</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">357</span> </span><span class="WHIT">	</span><span class="NAME">obj</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">obj.parent.parent</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//get the button - the parent of the menu which is the parent of the menu item which is this target control.</span><span class="WHIT">
<span class="line">358</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">obj.apptUid</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">359</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">data</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._apptData</span><span class="PUNC">[</span><span class="NAME">uid</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">360</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">data</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">361</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">362</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">363</span> </span><span class="WHIT">	</span><span class="NAME">this._snoozeSelectInputs</span><span class="PUNC">[</span><span class="NAME">uid</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">setValue</span><span class="PUNC">(</span><span class="NAME">ev.item.getText</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">364</span> </span><span class="COMM">//  this._snoozeValue = ev.item.getData(&#34;value&#34;);</span><span class="WHIT">
<span class="line">365</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">366</span> 
<span class="line">367</span> </span><span class="NAME">ZmReminderDialog.prototype._updateDelta</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">368</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">369</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">td</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.getElementById</span><span class="PUNC">(</span><span class="NAME">data.deltaId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">370</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">td</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">371</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">startDelta</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._computeDelta</span><span class="PUNC">(</span><span class="NAME">data.appt</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">372</span> 
<span class="line">373</span> </span><span class="WHIT">		</span><span class="NAME">td.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">startDelta</span><span class="WHIT"> </span><span class="PUNC">&gt;=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">&#34;ZmReminderOverdue&#34;</span><span class="WHIT">
<span class="line">374</span> </span><span class="WHIT">						</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">startDelta</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NAME">ZmReminderDialog.SOON</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">&#34;ZmReminderSoon&#34;</span><span class="WHIT">
<span class="line">375</span> </span><span class="WHIT">						</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;ZmReminderFuture&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">376</span> 
<span class="line">377</span> </span><span class="WHIT">		</span><span class="NAME">td.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">startDelta</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">this._formatDeltaString</span><span class="PUNC">(</span><span class="NAME">startDelta</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">data.appt.isAllDayEvent</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">378</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">379</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">380</span> 
<span class="line">381</span> </span><span class="COMM">/**
<span class="line">382</span>  * display the individual actions (snooze, dismiss) only if there&#39;s more than one reminder.
<span class="line">383</span>  * @private
<span class="line">384</span>  */</span><span class="WHIT">
<span class="line">385</span> </span><span class="NAME">ZmReminderDialog.prototype._updateIndividualSnoozeActionsVisibility</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">386</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">387</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">appts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._list.getArray</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">388</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">appts.length</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">389</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//all snoozed or dismissed, nothing to do here)</span><span class="WHIT">
<span class="line">390</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">391</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">multiple</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appts.length</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">392</span> </span><span class="WHIT">	</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">appts.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">393</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">appt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appts</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">394</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appt.getUniqueId</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">395</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">data</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._apptData</span><span class="PUNC">[</span><span class="NAME">uid</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">396</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">actionsRow</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.getElementById</span><span class="PUNC">(</span><span class="NAME">data.actionsRowId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">397</span> </span><span class="WHIT">		</span><span class="NAME">actionsRow.style.display</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">multiple</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">&#34;block&#34;</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;none&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">398</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">399</span> 
<span class="line">400</span> </span><span class="WHIT">	</span><span class="COMM">//update the all text</span><span class="WHIT">
<span class="line">401</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">dismissAllBtn</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._dismissButtons</span><span class="PUNC">[</span><span class="NAME">this.ALL_APPTS</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">402</span> </span><span class="WHIT">	</span><span class="NAME">dismissAllBtn.setText</span><span class="PUNC">(</span><span class="NAME">multiple</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">ZmMsg.dismissAll</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">ZmMsg.dismiss</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">403</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">snoozeAllBtn</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._snoozeButtons</span><span class="PUNC">[</span><span class="NAME">this.ALL_APPTS</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">404</span> </span><span class="WHIT">	</span><span class="NAME">snoozeAllBtn.setText</span><span class="PUNC">(</span><span class="NAME">multiple</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">ZmMsg.snoozeAllLabel</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">ZmMsg.snooze</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">405</span> 
<span class="line">406</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">snoozeAllLabelId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._apptData</span><span class="PUNC">[</span><span class="NAME">this.ALL_APPTS</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">snoozeAllLabelId</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">407</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">allLabelSpan</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.getElementById</span><span class="PUNC">(</span><span class="NAME">snoozeAllLabelId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">408</span> </span><span class="WHIT">	</span><span class="NAME">allLabelSpan.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">multiple</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">ZmMsg.snoozeAll</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">ZmMsg.snoozeFor</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">409</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">410</span> 
<span class="line">411</span> 
<span class="line">412</span> </span><span class="NAME">ZmReminderDialog.prototype._addAppt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">413</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">html</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">idx</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">appt</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">data</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">414</span> 
<span class="line">415</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appt.id</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">416</span> </span><span class="WHIT">	</span><span class="NAME">this._addData</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">417</span> 
<span class="line">418</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">calName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">appt.folderId</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="NAME">ZmOrganizer.ID_CALENDAR</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">appt.folderId</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="NAME">ZmOrganizer.ID_TASKS</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">this._calController</span><span class="PUNC">)</span><span class="WHIT">
<span class="line">419</span> </span><span class="WHIT">		</span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">this._calController.getCalendarName</span><span class="PUNC">(</span><span class="NAME">appt.folderId</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">420</span> 
<span class="line">421</span> 
<span class="line">422</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">calendar</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appCtxt.getById</span><span class="PUNC">(</span><span class="NAME">appt.folderId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">423</span> 
<span class="line">424</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">params</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">425</span> </span><span class="WHIT">		</span><span class="NAME">rowId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.rowId</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">426</span> </span><span class="WHIT">		</span><span class="NAME">calName</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">AjxStringUtil.htmlEncode</span><span class="PUNC">(</span><span class="NAME">calName</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">427</span> </span><span class="WHIT">		</span><span class="NAME">accountName</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">appCtxt.multiAccounts</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">calendar</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">calendar.getAccount</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getDisplayName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">428</span> </span><span class="WHIT">		</span><span class="NAME">location</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">AjxStringUtil.htmlEncode</span><span class="PUNC">(</span><span class="NAME">appt.getReminderLocation</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">429</span> </span><span class="WHIT">		</span><span class="NAME">apptIconHtml</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">AjxImg.getImageHtml</span><span class="PUNC">(</span><span class="NAME">appt.otherAttendees</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">&#34;ApptMeeting&#34;</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;Appointment&#34;</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">430</span> </span><span class="WHIT">		</span><span class="NAME">organizer</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">appt.otherAtt</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">appt.organizer</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">431</span> </span><span class="WHIT">		</span><span class="NAME">reminderName</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">AjxStringUtil.htmlEncode</span><span class="PUNC">(</span><span class="NAME">appt.getReminderName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">432</span> </span><span class="WHIT">		</span><span class="NAME">durationText</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">AjxStringUtil.trim</span><span class="PUNC">(</span><span class="NAME">this._getDurationText</span><span class="PUNC">(</span><span class="NAME">appt</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">433</span> </span><span class="WHIT">		</span><span class="NAME">deltaId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.deltaId</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">434</span> </span><span class="WHIT">		</span><span class="NAME">openLinkId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.openLinkId</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">435</span> </span><span class="WHIT">		</span><span class="NAME">dismissBtnId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.dismissBtnId</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">436</span> </span><span class="WHIT">		</span><span class="NAME">snoozeSelectInputId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.snoozeSelectInputId</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">437</span> </span><span class="WHIT">		</span><span class="NAME">snoozeSelectBtnId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.snoozeSelectBtnId</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">438</span> </span><span class="WHIT">		</span><span class="NAME">snoozeBtnId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.snoozeBtnId</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">439</span> </span><span class="WHIT">		</span><span class="NAME">actionsRowId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.actionsRowId</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">440</span> </span><span class="WHIT">        </span><span class="NAME">reminderNameContainerId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.reminderNameContainerId</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">441</span> </span><span class="WHIT">        </span><span class="NAME">reminderDescContainerId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.reminderDescContainerId</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">442</span> </span><span class="WHIT">        </span><span class="NAME">type</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">appt.type</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">appt.type</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">ZmItem.APPT</span><span class="WHIT">
<span class="line">443</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">444</span> </span><span class="WHIT">	</span><span class="NAME">html</span><span class="PUNC">[</span><span class="NAME">idx</span><span class="PUNC">++</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">AjxTemplate.expand</span><span class="PUNC">(</span><span class="STRN">&#34;calendar.Calendar#ReminderDialogRow&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">params</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">445</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">idx</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">446</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">447</span> 
<span class="line">448</span> </span><span class="NAME">ZmReminderDialog.prototype._addAllSection</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">449</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">html</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">idx</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">450</span> 
<span class="line">451</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.ALL_APPTS</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">452</span> 
<span class="line">453</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">data</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._apptData</span><span class="PUNC">[</span><span class="NAME">uid</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">454</span> </span><span class="WHIT">	</span><span class="NAME">this._addData</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">455</span> </span><span class="WHIT">	</span><span class="NAME">data.snoozeAllLabelId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;snoozeAllLabelContainerId_&#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">456</span> 
<span class="line">457</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">params</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">458</span> </span><span class="WHIT">		</span><span class="NAME">rowId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.rowId</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">459</span> </span><span class="WHIT">		</span><span class="NAME">dismissBtnId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.dismissBtnId</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">460</span> </span><span class="WHIT">		</span><span class="NAME">snoozeSelectInputId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.snoozeSelectInputId</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">461</span> </span><span class="WHIT">		</span><span class="NAME">snoozeSelectBtnId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.snoozeSelectBtnId</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">462</span> </span><span class="WHIT">		</span><span class="NAME">snoozeBtnId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.snoozeBtnId</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">463</span> </span><span class="WHIT">		</span><span class="NAME">snoozeAllLabelId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">data.snoozeAllLabelId</span><span class="WHIT">
<span class="line">464</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">465</span> </span><span class="WHIT">	</span><span class="NAME">html</span><span class="PUNC">[</span><span class="NAME">idx</span><span class="PUNC">++</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">AjxTemplate.expand</span><span class="PUNC">(</span><span class="STRN">&#34;calendar.Calendar#ReminderDialogAllSection&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">params</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">466</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">idx</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">467</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">468</span> 
<span class="line">469</span> </span><span class="NAME">ZmReminderDialog.prototype._addData</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">470</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">471</span> </span><span class="WHIT">	</span><span class="NAME">data.dismissBtnId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;dismissBtnContainer_&#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">472</span> </span><span class="WHIT">	</span><span class="NAME">data.snoozeSelectInputId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;snoozeSelectInputContainer_&#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">473</span> </span><span class="WHIT">	</span><span class="NAME">data.snoozeSelectBtnId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;snoozeSelectBtnContainer_&#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">474</span> </span><span class="WHIT">	</span><span class="NAME">data.snoozeBtnId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;snoozeBtnContainer_&#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">475</span> </span><span class="WHIT">	</span><span class="NAME">data.openLinkId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;openLinkContainer_&#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">476</span> </span><span class="WHIT">	</span><span class="NAME">data.actionsRowId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;actionsRowContainer_&#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">477</span> </span><span class="WHIT">	</span><span class="NAME">data.deltaId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;delta_&#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">478</span> </span><span class="WHIT">	</span><span class="NAME">data.rowId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;apptRow_&#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">479</span> </span><span class="WHIT">	</span><span class="NAME">data.reminderNameContainerId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;reminderNameContainerId_&#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">480</span> </span><span class="WHIT">	</span><span class="NAME">data.reminderDescContainerId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;reminderDescContainerId_&#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">481</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">482</span> 
<span class="line">483</span> </span><span class="NAME">ZmReminderDialog.prototype._openButtonListener</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">484</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ev</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">485</span> 
<span class="line">486</span> </span><span class="WHIT">    </span><span class="NAME">appCtxt.getAppController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">setStatusMsg</span><span class="PUNC">(</span><span class="NAME">ZmMsg.allRemindersAreSnoozed</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmStatusView.LEVEL_INFO</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">487</span> 
<span class="line">488</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">obj</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">DwtControl.getTargetControl</span><span class="PUNC">(</span><span class="NAME">ev</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">489</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">data</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._apptData</span><span class="PUNC">[</span><span class="NAME">obj.apptUid</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">490</span> 
<span class="line">491</span> </span><span class="WHIT">	</span><span class="NAME">this._snoozeButtonListener</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//do it after getting the obj and data since snoozing gets rid of the elements.</span><span class="WHIT">
<span class="line">492</span> 
<span class="line">493</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">appt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">data</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">data.appt</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">494</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appt.type</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">appt.type</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">ZmItem.APPT</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">495</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">appt</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">type</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">ZmItem.APPT</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">496</span> </span><span class="WHIT">		</span><span class="NAME">AjxDispatcher.require</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="STRN">&#34;MailCore&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;CalendarCore&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;Calendar&#34;</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">497</span> 
<span class="line">498</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cc</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">AjxDispatcher.run</span><span class="PUNC">(</span><span class="STRN">&#34;GetCalController&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">499</span> 
<span class="line">500</span> </span><span class="WHIT">		</span><span class="COMM">// the give appt object is a ZmCalBaseItem. We need a ZmAppt</span><span class="WHIT">
<span class="line">501</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">newAppt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">ZmAppt</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">502</span> </span><span class="WHIT">		</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">appt</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">503</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">AjxUtil.isFunction</span><span class="PUNC">(</span><span class="NAME">appt</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">504</span> </span><span class="WHIT">				</span><span class="NAME">newAppt</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appt</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">505</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">506</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">507</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">mode</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">newAppt.isRecurring</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">ZmCalItem.MODE_EDIT_SINGLE_INSTANCE</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">508</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">callback</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">AjxCallback</span><span class="PUNC">(</span><span class="NAME">cc</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">cc._showAppointmentDetails</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">newAppt</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">509</span> </span><span class="WHIT">		</span><span class="NAME">newAppt.getDetails</span><span class="PUNC">(</span><span class="NAME">mode</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">callback</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">510</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">appt</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">type</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">ZmItem.TASK</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">511</span> </span><span class="WHIT">        </span><span class="NAME">AjxDispatcher.require</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="STRN">&#34;TasksCore&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;Tasks&#34;</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">512</span> 
<span class="line">513</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">tlc</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">AjxDispatcher.run</span><span class="PUNC">(</span><span class="STRN">&#34;GetTaskListController&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">514</span> 
<span class="line">515</span> </span><span class="WHIT">		</span><span class="COMM">// the give appt object is a ZmCalBaseItem. We need a ZmAppt</span><span class="WHIT">
<span class="line">516</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">newTask</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">ZmTask</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">517</span> </span><span class="WHIT">		</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">appt</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">518</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">AjxUtil.isFunction</span><span class="PUNC">(</span><span class="NAME">appt</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">519</span> </span><span class="WHIT">				</span><span class="NAME">newTask</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appt</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">520</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">521</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">522</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">callback</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">AjxCallback</span><span class="PUNC">(</span><span class="NAME">tlc</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tlc._editTask</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">newTask</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">523</span> </span><span class="WHIT">		</span><span class="NAME">newTask.getDetails</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">callback</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">524</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">525</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">526</span> 
<span class="line">527</span> </span><span class="NAME">ZmReminderDialog.prototype._dismissButtonListener</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">528</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ev</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">529</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">obj</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">DwtControl.getTargetControl</span><span class="PUNC">(</span><span class="NAME">ev</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">530</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">obj.apptUid</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">531</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">data</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._apptData</span><span class="PUNC">[</span><span class="NAME">uid</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">532</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">data</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">533</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">appts</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">534</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">uid</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">this.ALL_APPTS</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">535</span> </span><span class="WHIT">		</span><span class="NAME">appts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._getApptsClone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">536</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">537</span> </span><span class="WHIT">	</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">538</span> </span><span class="WHIT">		</span><span class="NAME">appts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">data.appt</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//note - this could be all the appts this._list</span><span class="WHIT">
<span class="line">539</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">540</span> 
<span class="line">541</span> </span><span class="WHIT">	</span><span class="NAME">this._reminderController.dismissAppt</span><span class="PUNC">(</span><span class="NAME">appts</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">542</span> 
<span class="line">543</span> </span><span class="WHIT">	</span><span class="NAME">this._removeAppts</span><span class="PUNC">(</span><span class="NAME">appts</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">544</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">545</span> 
<span class="line">546</span> </span><span class="NAME">ZmReminderDialog.prototype._cleanupButton</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">547</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">buttons</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">548</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">button</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">buttons</span><span class="PUNC">[</span><span class="NAME">uid</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">549</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">button</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">550</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">551</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">552</span> </span><span class="WHIT">	</span><span class="NAME">button.dispose</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">553</span> </span><span class="WHIT">	</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">buttons</span><span class="PUNC">[</span><span class="NAME">uid</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">554</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">555</span> 
<span class="line">556</span> </span><span class="NAME">ZmReminderDialog.prototype._removeAppts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">557</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">appts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">558</span> </span><span class="WHIT">	</span><span class="NAME">appts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">AjxUtil.toArray</span><span class="PUNC">(</span><span class="NAME">appts</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">559</span> </span><span class="WHIT">	</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">appts.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">560</span> </span><span class="WHIT">		</span><span class="NAME">this._removeAppt</span><span class="PUNC">(</span><span class="NAME">appts</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">561</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">562</span> </span><span class="WHIT">	</span><span class="NAME">this._updateIndividualSnoozeActionsVisibility</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">563</span> 
<span class="line">564</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">565</span> 
<span class="line">566</span> </span><span class="NAME">ZmReminderDialog.prototype._removeAppt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">567</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">appt</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">568</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appt.getUniqueId</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">569</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">data</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._apptData</span><span class="PUNC">[</span><span class="NAME">uid</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">570</span> 
<span class="line">571</span> </span><span class="WHIT">	</span><span class="COMM">// cleanup HTML</span><span class="WHIT">
<span class="line">572</span> </span><span class="WHIT">	</span><span class="NAME">this._cleanupButton</span><span class="PUNC">(</span><span class="NAME">this._dismissButtons</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">573</span> </span><span class="WHIT">	</span><span class="NAME">this._cleanupButton</span><span class="PUNC">(</span><span class="NAME">this._openButtons</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">574</span> </span><span class="WHIT">	</span><span class="NAME">this._cleanupButton</span><span class="PUNC">(</span><span class="NAME">this._snoozeButtons</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">575</span> </span><span class="WHIT">	</span><span class="NAME">this._cleanupButton</span><span class="PUNC">(</span><span class="NAME">this._snoozeSelectButtons</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">576</span> </span><span class="WHIT">	</span><span class="NAME">this._cleanupButton</span><span class="PUNC">(</span><span class="NAME">this._snoozeSelectInputs</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">577</span> 
<span class="line">578</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">row</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.getElementById</span><span class="PUNC">(</span><span class="NAME">data.rowId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">579</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">row</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">580</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">nextRow</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">row.nextSibling</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">581</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">nextRow</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">nextRow.getAttribute</span><span class="PUNC">(</span><span class="STRN">&#34;name&#34;</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">&#34;rdsep&#34;</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">582</span> </span><span class="WHIT">			</span><span class="NAME">nextRow.parentNode.removeChild</span><span class="PUNC">(</span><span class="NAME">nextRow</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">583</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">584</span> </span><span class="WHIT">		</span><span class="NAME">row.parentNode.removeChild</span><span class="PUNC">(</span><span class="NAME">row</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">585</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">586</span> 
<span class="line">587</span> </span><span class="WHIT">	</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._apptData</span><span class="PUNC">[</span><span class="NAME">uid</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">588</span> </span><span class="WHIT">	</span><span class="NAME">this._list.remove</span><span class="PUNC">(</span><span class="NAME">appt</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">589</span> 
<span class="line">590</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._list.size</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">591</span> </span><span class="WHIT">		</span><span class="NAME">this._cleanupButton</span><span class="PUNC">(</span><span class="NAME">this._dismissButtons</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.ALL_APPTS</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">592</span> </span><span class="WHIT">		</span><span class="NAME">this._cleanupButton</span><span class="PUNC">(</span><span class="NAME">this._snoozeButtons</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.ALL_APPTS</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">593</span> </span><span class="WHIT">		</span><span class="NAME">this._cleanupButton</span><span class="PUNC">(</span><span class="NAME">this._snoozeSelectButtons</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.ALL_APPTS</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">594</span> </span><span class="WHIT">		</span><span class="NAME">this._cleanupButton</span><span class="PUNC">(</span><span class="NAME">this._snoozeSelectInputs</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.ALL_APPTS</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">595</span> </span><span class="WHIT">		</span><span class="NAME">this.popdown</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">596</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">597</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">598</span> 
<span class="line">599</span> 
<span class="line">600</span> </span><span class="NAME">ZmReminderDialog.prototype._getApptsClone</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">601</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">602</span> </span><span class="WHIT">	</span><span class="COMM">//make a shallow copy of this_list.getArray(),  so that stuff can work while or after removing things from the _list. This is a must.</span><span class="WHIT">
<span class="line">603</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._list.getArray</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">slice</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">604</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">605</span> 
<span class="line">606</span> </span><span class="NAME">ZmReminderDialog.prototype._snoozeButtonListener</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">607</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ev</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">all</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">608</span> 
<span class="line">609</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">data</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">610</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">uid</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">611</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">appts</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">612</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">all</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">//all is true in the case of &#34;open&#34; where we snooze everything artificially</span><span class="WHIT">
<span class="line">613</span> </span><span class="WHIT">		</span><span class="NAME">uid</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.ALL_APPTS</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">614</span> </span><span class="WHIT">		</span><span class="NAME">appts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._getApptsClone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">615</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">616</span> </span><span class="WHIT">	</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">617</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">obj</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">DwtControl.getTargetControl</span><span class="PUNC">(</span><span class="NAME">ev</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">618</span> </span><span class="WHIT">		</span><span class="NAME">uid</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">obj.apptUid</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">619</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">uid</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">this.ALL_APPTS</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">620</span> </span><span class="WHIT">			</span><span class="NAME">appts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._getApptsClone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">621</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">622</span> </span><span class="WHIT">		</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">623</span> </span><span class="WHIT">			</span><span class="NAME">data</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._apptData</span><span class="PUNC">[</span><span class="NAME">uid</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">624</span> </span><span class="WHIT">			</span><span class="NAME">appts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">AjxUtil.toArray</span><span class="PUNC">(</span><span class="NAME">data.appt</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">625</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">626</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">627</span> 
<span class="line">628</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">snoozeString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._snoozeSelectInputs</span><span class="PUNC">[</span><span class="NAME">uid</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getValue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">629</span> 
<span class="line">630</span> </span><span class="WHIT">    </span><span class="COMM">// check if all fields are populated w/ valid values</span><span class="WHIT">
<span class="line">631</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">errorMsg</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">632</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">snoozeInfo</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">633</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">beforeAppt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">634</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">snoozeString</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">635</span> </span><span class="WHIT">         </span><span class="NAME">errorMsg.push</span><span class="PUNC">(</span><span class="NAME">ZmMsg.reminderSnoozeClickNoDuration</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">636</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">637</span> </span><span class="WHIT">	</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">638</span> </span><span class="WHIT">        </span><span class="NAME">snoozeInfo</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ZmCalendarApp.parseReminderString</span><span class="PUNC">(</span><span class="NAME">snoozeString</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">639</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">snoozeInfo.reminderValue</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">&#34;&#34;</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">640</span> </span><span class="WHIT">            </span><span class="COMM">// Returned when no number was specified in the snooze input field</span><span class="WHIT">
<span class="line">641</span> </span><span class="WHIT">            </span><span class="NAME">errorMsg.push</span><span class="PUNC">(</span><span class="NAME">ZmMsg.reminderSnoozeClickNoNumber</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">642</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">  </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">643</span> </span><span class="WHIT">            </span><span class="COMM">// Test if the unit is a known one (default behaviour for parseReminderString</span><span class="WHIT">
<span class="line">644</span> </span><span class="WHIT">            </span><span class="COMM">// returns unknowns as hours)</span><span class="WHIT">
<span class="line">645</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">valid</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._testSnoozeString</span><span class="PUNC">(</span><span class="NAME">snoozeString</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">646</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">valid</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">647</span> </span><span class="WHIT">                 </span><span class="NAME">errorMsg.push</span><span class="PUNC">(</span><span class="NAME">ZmMsg.reminderSnoozeClickUnknownUnit</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">648</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">649</span> </span><span class="WHIT">                </span><span class="COMM">// Detect &#39;before&#39;</span><span class="WHIT">
<span class="line">650</span> </span><span class="WHIT">                </span><span class="COMM">//Fix for Bug: 80651 - Check for snooze before object</span><span class="WHIT">
<span class="line">651</span> </span><span class="WHIT">                </span><span class="NAME">beforeAppt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">snoozeInfo.before</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">652</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">653</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">654</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">655</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">errorMsg.length</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">656</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">msg</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">errorMsg.join</span><span class="PUNC">(</span><span class="STRN">&#34;&lt;br&gt;&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">657</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">dialog</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appCtxt.getMsgDialog</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">658</span> </span><span class="WHIT">        </span><span class="NAME">dialog.reset</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">659</span> </span><span class="WHIT">        </span><span class="NAME">dialog.setMessage</span><span class="PUNC">(</span><span class="NAME">msg</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">DwtMessageDialog.WARNING_STYLE</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">660</span> </span><span class="WHIT">        </span><span class="NAME">dialog.popup</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">661</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">662</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">663</span> 
<span class="line">664</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">snoozeMinutes</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ZmCalendarApp.convertReminderUnits</span><span class="PUNC">(</span><span class="NAME">snoozeInfo.reminderValue</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">snoozeInfo.reminderUnits</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">665</span> </span><span class="WHIT">	</span><span class="NAME">this._reminderController.snoozeAppt</span><span class="PUNC">(</span><span class="NAME">appts</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">666</span> </span><span class="WHIT">	</span><span class="NAME">this._reminderController._snoozeApptAction</span><span class="PUNC">(</span><span class="NAME">appts</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">snoozeMinutes</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">beforeAppt</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">667</span> 
<span class="line">668</span> </span><span class="WHIT">	</span><span class="NAME">this._removeAppts</span><span class="PUNC">(</span><span class="NAME">appts</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">669</span> 
<span class="line">670</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">671</span> 
<span class="line">672</span> 
<span class="line">673</span> 
<span class="line">674</span> </span><span class="COMM">/**
<span class="line">675</span>  * Parses the given string to insure the units are recognized
<span class="line">676</span>  * @param snoozeString snooze string eg. &#34;10 minutes&#34;
<span class="line">677</span>  *
<span class="line">678</span>  * @private
<span class="line">679</span>  */</span><span class="WHIT">
<span class="line">680</span> </span><span class="NAME">ZmReminderDialog.prototype._testSnoozeString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">681</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">snoozeString</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">682</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">snoozeUnitStrings</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">683</span> </span><span class="WHIT">    </span><span class="NAME">snoozeUnitStrings</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">AjxMsg.minute</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">684</span> </span><span class="WHIT">    </span><span class="NAME">snoozeUnitStrings</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">AjxMsg.hour</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">685</span> </span><span class="WHIT">    </span><span class="NAME">snoozeUnitStrings</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">AjxMsg.day</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">686</span> </span><span class="WHIT">    </span><span class="NAME">snoozeUnitStrings</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">AjxMsg.week</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">687</span> </span><span class="WHIT">    </span><span class="COMM">// Plural</span><span class="WHIT">
<span class="line">688</span> </span><span class="WHIT">    </span><span class="NAME">snoozeUnitStrings</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">AjxMsg.minutes</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">689</span> </span><span class="WHIT">    </span><span class="NAME">snoozeUnitStrings</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">AjxMsg.hours</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">690</span> </span><span class="WHIT">    </span><span class="NAME">snoozeUnitStrings</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">AjxMsg.days</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">691</span> </span><span class="WHIT">    </span><span class="NAME">snoozeUnitStrings</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">AjxMsg.weeks</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">692</span> 
<span class="line">693</span> </span><span class="WHIT">    </span><span class="NAME">snoozeString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">snoozeString.toLowerCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">694</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">found</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">695</span> </span><span class="WHIT">    </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">snoozeUnitStrings.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">696</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">snoozeString.indexOf</span><span class="PUNC">(</span><span class="NAME">snoozeUnitStrings</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">toLowerCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&gt;=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">697</span> </span><span class="WHIT">            </span><span class="NAME">found</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">698</span> </span><span class="WHIT">            </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">699</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">700</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">701</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">found</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">702</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">703</span> 
<span class="line">704</span> 
<span class="line">705</span> 
<span class="line">706</span> </span><span class="NAME">ZmReminderDialog.prototype._cancelSnooze</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">707</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">708</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._snoozeActionId</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">709</span> </span><span class="WHIT">		</span><span class="NAME">AjxTimedAction.cancelAction</span><span class="PUNC">(</span><span class="NAME">this._snoozeActionId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">710</span> </span><span class="WHIT">		</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._snoozeActionId</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">711</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">712</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">713</span> 
<span class="line">714</span> </span><span class="NAME">ZmReminderDialog.prototype._getDurationText</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">715</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">appt</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">716</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">isMultiDay</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appt.isMultiDay</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">717</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">start</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appt._alarmInstStart</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">(</span><span class="NAME">appt._alarmInstStart</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">appt.startDate</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">appt.startDate</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">718</span> </span><span class="WHIT">	</span><span class="COMM">// bug: 28598 - alarm for recurring appt might still point to old alarm time</span><span class="WHIT">
<span class="line">719</span> </span><span class="WHIT">	</span><span class="COMM">// cannot take endTime directly</span><span class="WHIT">
<span class="line">720</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">endTime</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appt._alarmInstStart</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">start.getTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">appt.getDuration</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">appt.getEndTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">721</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">end</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">(</span><span class="NAME">endTime</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">722</span> 
<span class="line">723</span> </span><span class="WHIT">    </span><span class="COMM">//for task</span><span class="WHIT">
<span class="line">724</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">appt.type</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">ZmItem.TASK</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">start</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">endTime</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">725</span> 
<span class="line">726</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">appt.isAllDayEvent</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">727</span> </span><span class="WHIT">		</span><span class="NAME">end</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appt.type</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="NAME">ZmItem.TASK</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">(</span><span class="NAME">endTime</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">isMultiDay</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">AjxDateUtil.MSEC_PER_HOUR</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">end</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">728</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">pattern</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">isMultiDay</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">ZmMsg.apptTimeAllDayMulti</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">ZmMsg.apptTimeAllDay</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">729</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">start</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">AjxMessageFormat.format</span><span class="PUNC">(</span><span class="NAME">pattern</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">start</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">end</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">AjxMessageFormat.format</span><span class="PUNC">(</span><span class="NAME">pattern</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">end</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//for task</span><span class="WHIT">
<span class="line">730</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">731</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">pattern</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">isMultiDay</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">ZmMsg.apptTimeInstanceMulti</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">ZmMsg.apptTimeInstance</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">732</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">AjxMessageFormat.format</span><span class="PUNC">(</span><span class="NAME">pattern</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">start</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">end</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;&#34;</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">733</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">734</span> 
<span class="line">735</span> </span><span class="NAME">ZmReminderDialog.prototype._computeDelta</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">736</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">appt</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">737</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">deltaTime</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">738</span> 
<span class="line">739</span> </span><span class="WHIT">    </span><span class="COMM">// Split out task processing - the deltaTime is used to split the tasks into sections (Past Due, Upcoming, No</span><span class="WHIT">
<span class="line">740</span> </span><span class="WHIT">    </span><span class="COMM">// Due Date), and a task is only overdue when it is later than its end time.  AlarmData is the</span><span class="WHIT">
<span class="line">741</span> </span><span class="WHIT">    </span><span class="COMM">// next reminder trigger time, and is inappropriate to use for sorting the tasks.</span><span class="WHIT">
<span class="line">742</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">now</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">743</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">appt.type</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">ZmItem.TASK</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">744</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">appt.getEndTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">745</span> </span><span class="WHIT">            </span><span class="NAME">deltaTime</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">now</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">appt.getEndTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">746</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">747</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">748</span> </span><span class="WHIT">        </span><span class="COMM">// Calendar Appt</span><span class="WHIT">
<span class="line">749</span> 
<span class="line">750</span> </span><span class="WHIT">        </span><span class="COMM">//I refactored the big nested ternary operator (?:) to make it more readable and try to understand what&#39;s the logic here.</span><span class="WHIT">
<span class="line">751</span> </span><span class="WHIT">        </span><span class="COMM">// After doing so, this doesn&#39;t make sense to me. But I have no idea if it should be this way on purpose, and that is the way it was with the ?:</span><span class="WHIT">
<span class="line">752</span> </span><span class="WHIT">        </span><span class="COMM">// Basically if there is NO alarmData it uses the appt startTime, which makes sense. But if there IS alarmData but no alarmInstStart it uses the endTime? WHY? What about the startTime?</span><span class="WHIT">
<span class="line">753</span> </span><span class="WHIT">        </span><span class="COMM">// I don&#39;t get it. Seems wrong.</span><span class="WHIT">
<span class="line">754</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">appt.alarmData</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">appt.alarmData.length</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">755</span> </span><span class="WHIT">            </span><span class="NAME">deltaTime</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">now</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">appt.getStartTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">756</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">757</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">alarmInstStart</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">appt.alarmData</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">alarmInstStart</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//returned from the server in case i&#39;m wondering</span><span class="WHIT">
<span class="line">758</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">alarmInstStart</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">759</span> </span><span class="WHIT">                </span><span class="NAME">deltaTime</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">now</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">appt.adjustMS</span><span class="PUNC">(</span><span class="NAME">alarmInstStart</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">appt.tzo</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">760</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">appt.getEndTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">761</span> </span><span class="WHIT">                </span><span class="NAME">deltaTime</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">now</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">appt.getEndTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">762</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">763</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">764</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">765</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">deltaTime</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">766</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">767</span> 
<span class="line">768</span> </span><span class="NAME">ZmReminderDialog.prototype._formatDeltaString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">769</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">deltaMSec</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">isAllDay</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">770</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">prefix</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">deltaMSec</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">&#34;In&#34;</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;OverdueBy&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">771</span> </span><span class="WHIT">	</span><span class="NAME">deltaMSec</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">deltaMSec</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">772</span> 
<span class="line">773</span> </span><span class="WHIT">	</span><span class="COMM">// calculate parts</span><span class="WHIT">
<span class="line">774</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">years</span><span class="WHIT">  </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">775</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">months</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">776</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">days</span><span class="WHIT">   </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">777</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">hours</span><span class="WHIT">  </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">778</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">mins</span><span class="WHIT">   </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">779</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">secs</span><span class="WHIT">   </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">780</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">years</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">  </span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">deltaMSec</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">AjxDateUtil.MSEC_PER_DAY</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NUMB">365</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">781</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">years</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">782</span> </span><span class="WHIT">		</span><span class="NAME">deltaMSec</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">years</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">AjxDateUtil.MSEC_PER_DAY</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NUMB">365</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">783</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">784</span> </span><span class="WHIT">	</span><span class="NAME">months</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">deltaMSec</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">AjxDateUtil.MSEC_PER_DAY</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NUMB">30.42</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">785</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">months</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">786</span> </span><span class="WHIT">		</span><span class="NAME">deltaMSec</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">months</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">AjxDateUtil.MSEC_PER_DAY</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NUMB">30.42</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">787</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">788</span> </span><span class="WHIT">	</span><span class="NAME">days</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">deltaMSec</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">AjxDateUtil.MSEC_PER_DAY</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">789</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">days</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">790</span> </span><span class="WHIT">		</span><span class="NAME">deltaMSec</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">days</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">AjxDateUtil.MSEC_PER_DAY</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">791</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">792</span> </span><span class="WHIT">    </span><span class="NAME">hours</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">deltaMSec</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">AjxDateUtil.MSEC_PER_HOUR</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">793</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">hours</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">794</span> </span><span class="WHIT">        </span><span class="NAME">deltaMSec</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">hours</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NAME">AjxDateUtil.MSEC_PER_HOUR</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">795</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">796</span> </span><span class="WHIT">    </span><span class="NAME">mins</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">deltaMSec</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">60000</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">797</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">mins</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">798</span> </span><span class="WHIT">        </span><span class="NAME">deltaMSec</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">mins</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NUMB">60000</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">799</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">800</span> </span><span class="WHIT">    </span><span class="NAME">secs</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">deltaMSec</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">1000</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">801</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">secs</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NUMB">30</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">mins</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NUMB">59</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">802</span> </span><span class="WHIT">        </span><span class="NAME">mins</span><span class="PUNC">++</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">803</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">804</span> </span><span class="WHIT">	</span><span class="NAME">secs</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">805</span> 
<span class="line">806</span> </span><span class="WHIT">	</span><span class="COMM">// determine message</span><span class="WHIT">
<span class="line">807</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">amount</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">808</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">years</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">809</span> </span><span class="WHIT">		</span><span class="NAME">amount</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;Years&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">810</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">years</span><span class="WHIT"> </span><span class="PUNC">&lt;=</span><span class="WHIT"> </span><span class="NUMB">3</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">months</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">811</span> </span><span class="WHIT">			</span><span class="NAME">amount</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;YearsMonths&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">812</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">813</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">months</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">814</span> </span><span class="WHIT">		</span><span class="NAME">amount</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;Months&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">815</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">months</span><span class="WHIT"> </span><span class="PUNC">&lt;=</span><span class="WHIT"> </span><span class="NUMB">3</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">days</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">816</span> </span><span class="WHIT">			</span><span class="NAME">amount</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;MonthsDays&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">817</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">818</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">days</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">819</span> </span><span class="WHIT">		</span><span class="NAME">amount</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;Days&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">820</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">isAllDay</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">days</span><span class="WHIT"> </span><span class="PUNC">&lt;=</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">hours</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">821</span> </span><span class="WHIT">            </span><span class="COMM">// Only include hours if not an all day appt/task</span><span class="WHIT">
<span class="line">822</span> </span><span class="WHIT">			</span><span class="NAME">amount</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;DaysHours&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">823</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">824</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">825</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">isAllDay</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">826</span> </span><span class="WHIT">            </span><span class="COMM">// &#39;Overdue&#39; from start of day, which really means due today</span><span class="WHIT">
<span class="line">827</span> </span><span class="WHIT">            </span><span class="NAME">amount</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="STRN">&#34;Today&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">828</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">  </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">829</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">hours</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">830</span> </span><span class="WHIT">                </span><span class="NAME">amount</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;Hours&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">831</span> </span><span class="WHIT">                </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">hours</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NUMB">5</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">mins</span><span class="WHIT"> </span><span class="PUNC">&gt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">832</span> </span><span class="WHIT">                    </span><span class="NAME">amount</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;HoursMinutes&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">833</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">834</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">835</span> </span><span class="WHIT">                </span><span class="NAME">amount</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;Minutes&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">836</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">837</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">838</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">839</span> 
<span class="line">840</span> </span><span class="WHIT">	</span><span class="COMM">// format message</span><span class="WHIT">
<span class="line">841</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">key</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="STRN">&#34;reminder&#34;</span><span class="PUNC">,</span><span class="NAME">prefix</span><span class="PUNC">,</span><span class="NAME">amount</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">join</span><span class="PUNC">(</span><span class="STRN">&#34;&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">842</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">args</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">deltaMSec</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">years</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">months</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">days</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">hours</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">mins</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">secs</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">843</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">AjxMessageFormat.format</span><span class="PUNC">(</span><span class="NAME">ZmMsg</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">args</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">844</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">845</span> 
<span class="line">846</span> 
<span class="line">847</span> </span><span class="COMM">//Bug 65466: Method overridden to remove the ESC button behavior</span><span class="WHIT">
<span class="line">848</span> 
<span class="line">849</span> </span><span class="NAME">ZmReminderDialog.prototype.handleKeyAction</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">850</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">actionCode</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ev</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">851</span> </span><span class="WHIT">	</span><span class="KEYW">switch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">actionCode</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">852</span> 
<span class="line">853</span> </span><span class="WHIT">		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">DwtKeyMap.ENTER</span><span class="PUNC">:</span><span class="WHIT">
<span class="line">854</span> </span><span class="WHIT">			</span><span class="NAME">this.notifyListeners</span><span class="PUNC">(</span><span class="NAME">DwtEvent.ENTER</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ev</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">855</span> </span><span class="WHIT">			</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">856</span> 
<span class="line">857</span> </span><span class="WHIT">		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">DwtKeyMap.CANCEL</span><span class="PUNC">:</span><span class="WHIT">
<span class="line">858</span> </span><span class="WHIT">			</span><span class="COMM">// Dont do anything</span><span class="WHIT">
<span class="line">859</span> </span><span class="WHIT">			</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">860</span> 
<span class="line">861</span> </span><span class="WHIT">		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">DwtKeyMap.YES</span><span class="PUNC">:</span><span class="WHIT">
<span class="line">862</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._buttonDesc</span><span class="PUNC">[</span><span class="NAME">DwtDialog.YES_BUTTON</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">863</span> </span><span class="WHIT">				</span><span class="NAME">this._runCallbackForButtonId</span><span class="PUNC">(</span><span class="NAME">DwtDialog.YES_BUTTON</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">864</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">865</span> </span><span class="WHIT">			</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">866</span> 
<span class="line">867</span> </span><span class="WHIT">		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">DwtKeyMap.NO</span><span class="PUNC">:</span><span class="WHIT">
<span class="line">868</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._buttonDesc</span><span class="PUNC">[</span><span class="NAME">DwtDialog.NO_BUTTON</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">869</span> </span><span class="WHIT">				</span><span class="NAME">this._runCallbackForButtonId</span><span class="PUNC">(</span><span class="NAME">DwtDialog.NO_BUTTON</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">870</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">871</span> </span><span class="WHIT">			</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">872</span> 
<span class="line">873</span> </span><span class="WHIT">		</span><span class="KEYW">default</span><span class="PUNC">:</span><span class="WHIT">
<span class="line">874</span> </span><span class="WHIT">			</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">875</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">876</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">877</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">878</span> </span></pre></body></html>