<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.line {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class="line">  1</span> <span class="COMM">/*
<span class="line">  2</span>  * ***** BEGIN LICENSE BLOCK *****
<span class="line">  3</span>  * Zimbra Collaboration Suite Web Client
<span class="line">  4</span>  * Copyright (C) 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014 Zimbra, Inc.
<span class="line">  5</span>  * 
<span class="line">  6</span>  * The contents of this file are subject to the Common Public Attribution License Version 1.0 (the &#34;License&#34;);
<span class="line">  7</span>  * you may not use this file except in compliance with the License. 
<span class="line">  8</span>  * You may obtain a copy of the License at: http://www.zimbra.com/license
<span class="line">  9</span>  * The License is based on the Mozilla Public License Version 1.1 but Sections 14 and 15 
<span class="line"> 10</span>  * have been added to cover use of software over a computer network and provide for limited attribution 
<span class="line"> 11</span>  * for the Original Developer. In addition, Exhibit A has been modified to be consistent with Exhibit B. 
<span class="line"> 12</span>  * 
<span class="line"> 13</span>  * Software distributed under the License is distributed on an &#34;AS IS&#34; basis, 
<span class="line"> 14</span>  * WITHOUT WARRANTY OF ANY KIND, either express or implied. 
<span class="line"> 15</span>  * See the License for the specific language governing rights and limitations under the License. 
<span class="line"> 16</span>  * The Original Code is Zimbra Open Source Web Client. 
<span class="line"> 17</span>  * The Initial Developer of the Original Code is Zimbra, Inc. 
<span class="line"> 18</span>  * All portions of the code are Copyright (C) 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014 Zimbra, Inc. All Rights Reserved. 
<span class="line"> 19</span>  * ***** END LICENSE BLOCK *****
<span class="line"> 20</span>  */</span><span class="WHIT">
<span class="line"> 21</span> 
<span class="line"> 22</span> </span><span class="COMM">/**
<span class="line"> 23</span>  * @overview
<span class="line"> 24</span>  * This file contains the operation class.
<span class="line"> 25</span>  * 
<span class="line"> 26</span>  */</span><span class="WHIT">
<span class="line"> 27</span> 
<span class="line"> 28</span> </span><span class="COMM">/**
<span class="line"> 29</span>  * Creates the operation object.
<span class="line"> 30</span>  * @class
<span class="line"> 31</span>  * This class provides the idea of an &#34;operation&#34;, which is a user-initiated action
<span class="line"> 32</span>  * exposed through a button or menu item. Many operations (such as Delete) are shared
<span class="line"> 33</span>  * across applications/controllers. An operation gets defined by specifying its name,
<span class="line"> 34</span>  * tool tip, and image. Then controllers can simply select which operations they&#39;d like
<span class="line"> 35</span>  * to support.
<span class="line"> 36</span>  * &lt;br/&gt;
<span class="line"> 37</span>  * &lt;br/&gt;
<span class="line"> 38</span>  * The two primary clients of this class are {@link ZmButtonToolBar} and {@link ZmActionMenu}. Clients 
<span class="line"> 39</span>  * should support {@link #createOp} and {@link #getOp} methods. See the two aforementioned clients for
<span class="line"> 40</span>  * examples.
<span class="line"> 41</span>  * 
<span class="line"> 42</span>  * @author Conrad Damon
<span class="line"> 43</span>  */</span><span class="WHIT">
<span class="line"> 44</span> </span><span class="NAME">ZmOperation</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 45</span> 
<span class="line"> 46</span> </span><span class="COMM">// Special operations</span><span class="WHIT">
<span class="line"> 47</span> </span><span class="NAME">ZmOperation.NONE</span><span class="WHIT"> 					</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;NONE&#34;</span><span class="PUNC">;</span><span class="WHIT">		</span><span class="COMM">// no operations or menu items</span><span class="WHIT">
<span class="line"> 48</span> </span><span class="NAME">ZmOperation.SEP</span><span class="WHIT"> 					</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;SEP&#34;</span><span class="PUNC">;</span><span class="WHIT">		</span><span class="COMM">// separator</span><span class="WHIT">
<span class="line"> 49</span> </span><span class="NAME">ZmOperation.SPACER</span><span class="WHIT"> 					</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;SPACER&#34;</span><span class="PUNC">;</span><span class="WHIT">		</span><span class="COMM">// spacer (toolbar)</span><span class="WHIT">
<span class="line"> 50</span> </span><span class="NAME">ZmOperation.FILLER</span><span class="WHIT"> 					</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;FILLER&#34;</span><span class="PUNC">;</span><span class="WHIT">		</span><span class="COMM">// filler (toolbar)</span><span class="WHIT">
<span class="line"> 51</span> 
<span class="line"> 52</span> </span><span class="COMM">// suffix for disabled image</span><span class="WHIT">
<span class="line"> 53</span> </span><span class="NAME">ZmOperation.DIS</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;Dis&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 54</span> 
<span class="line"> 55</span> </span><span class="COMM">// text and icons displayed for operation</span><span class="WHIT">
<span class="line"> 56</span> </span><span class="NAME">ZmOperation.SETUP</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 57</span> 
<span class="line"> 58</span> </span><span class="COMM">// special-purpose operations</span><span class="WHIT">
<span class="line"> 59</span> </span><span class="NAME">ZmOperation.SETUP</span><span class="PUNC">[</span><span class="NAME">ZmOperation.NONE</span><span class="PUNC">]</span><span class="WHIT">		</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">	</span><span class="COMM">// means no operations (as opposed to a default set)</span><span class="WHIT">
<span class="line"> 60</span> </span><span class="NAME">ZmOperation.SETUP</span><span class="PUNC">[</span><span class="NAME">ZmOperation.SEP</span><span class="PUNC">]</span><span class="WHIT">		</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">	</span><span class="COMM">// a thin vertical or horizontal bar</span><span class="WHIT">
<span class="line"> 61</span> </span><span class="NAME">ZmOperation.SETUP</span><span class="PUNC">[</span><span class="NAME">ZmOperation.SPACER</span><span class="PUNC">]</span><span class="WHIT">	</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">	</span><span class="COMM">// empty space of a given size</span><span class="WHIT">
<span class="line"> 62</span> </span><span class="NAME">ZmOperation.SETUP</span><span class="PUNC">[</span><span class="NAME">ZmOperation.FILLER</span><span class="PUNC">]</span><span class="WHIT">	</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">	</span><span class="COMM">// expandable space (for right-align in toolbars)</span><span class="WHIT">
<span class="line"> 63</span> 
<span class="line"> 64</span> </span><span class="COMM">// preconditions for operations - no automatic checking is done, so a client</span><span class="WHIT">
<span class="line"> 65</span> </span><span class="COMM">// of this class has to check them on its own if it wants</span><span class="WHIT">
<span class="line"> 66</span> </span><span class="NAME">ZmOperation.SETTING</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 67</span> 
<span class="line"> 68</span> </span><span class="COMM">// code to run after an operation has been created - typically used to create</span><span class="WHIT">
<span class="line"> 69</span> </span><span class="COMM">// a menu for a button</span><span class="WHIT">
<span class="line"> 70</span> </span><span class="NAME">ZmOperation.CALLBACK</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 71</span> 
<span class="line"> 72</span> </span><span class="COMM">/**
<span class="line"> 73</span>  * Defines the aspects of an operation, and the ID that refers to it.
<span class="line"> 74</span>  * 
<span class="line"> 75</span>  * @param {String}	op		the name of the operation
<span class="line"> 76</span>  * @param {String}	text		the msg key for button or menu item text
<span class="line"> 77</span>  * @param {String}	tooltip	the msg key for tooltip text
<span class="line"> 78</span>  * @param {String}	image		the icon class for the button or menu item
<span class="line"> 79</span>  * @param {String}	disImage	the disabled version of image; defaults to image + &#34;Dis&#34;
<span class="line"> 80</span>  * @param {constant}	setting	the setting which acts as a precondition for this operation
<span class="line"> 81</span>  * @param {AjxCallback}	callback	the callback to run after this operation has been created
<span class="line"> 82</span>  */</span><span class="WHIT">
<span class="line"> 83</span> </span><span class="NAME">ZmOperation.registerOp</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line"> 84</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">op</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">params</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">setting</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">callback</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line"> 85</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation</span><span class="PUNC">[</span><span class="NAME">op</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">op</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 86</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.SETUP</span><span class="PUNC">[</span><span class="NAME">op</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">params</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 87</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">setting</span><span class="PUNC">)</span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">ZmOperation.SETTING</span><span class="PUNC">[</span><span class="NAME">op</span><span class="PUNC">]</span><span class="WHIT">	</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">setting</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT">
<span class="line"> 88</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">callback</span><span class="PUNC">)</span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">ZmOperation.CALLBACK</span><span class="PUNC">[</span><span class="NAME">op</span><span class="PUNC">]</span><span class="WHIT">	</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">callback</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT">
<span class="line"> 89</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 90</span> 
<span class="line"> 91</span> 
<span class="line"> 92</span> </span><span class="NAME">ZmOperation.KEY_ID</span><span class="WHIT">		</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;opId&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 93</span> </span><span class="NAME">ZmOperation.MENUITEM_ID</span><span class="WHIT">	</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;menuItemId&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 94</span> 
<span class="line"> 95</span> </span><span class="NAME">ZmOperation.NEW_ITEM_OPS</span><span class="WHIT">	</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 96</span> </span><span class="NAME">ZmOperation.NEW_ITEM_KEY</span><span class="WHIT">	</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 97</span> </span><span class="NAME">ZmOperation.NEW_ORG_OPS</span><span class="WHIT">		</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 98</span> </span><span class="NAME">ZmOperation.NEW_ORG_KEY</span><span class="WHIT">		</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line"> 99</span> 
<span class="line">100</span> </span><span class="COMM">// Static hash of operation IDs ad descriptors</span><span class="WHIT">
<span class="line">101</span> </span><span class="NAME">ZmOperation._operationDesc</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">102</span> 
<span class="line">103</span> </span><span class="COMM">/**
<span class="line">104</span>  * Initializes and creates standard operations.
<span class="line">105</span>  * 
<span class="line">106</span>  */</span><span class="WHIT">
<span class="line">107</span> </span><span class="NAME">ZmOperation.initialize</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">108</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">109</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_ACTIONS_MENU</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;actions&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">textPrecedence</span><span class="PUNC">:</span><span class="NUMB">40</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">110</span> </span><span class="WHIT">	
<span class="line">111</span> 	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_ATTACHMENT</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;addAttachment&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;attachmentTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Attachment&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.ATTACHMENT</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">showImageInToolbar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">112</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_CALL</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Telephone&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">113</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_CANCEL</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;cancel&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;cancelTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Cancel&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.CANCEL</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">114</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_CHECK_ALL</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;checkAll&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Check&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">115</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_CLEAR_ALL</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;clearAll&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Cancel&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">116</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_CLOSE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;close&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;closeTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Close&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.CANCEL</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">117</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_COMPOSE_FORMAT</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;format&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;formatTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;SwitchFormat&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.HTML_FORMAT</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.HTML_COMPOSE_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">118</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_CONTACTGROUP_MENU</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;AB_CONTACT_GROUP&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;contactGroupTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Group&#34;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">119</span> </span><span class="WHIT">		</span><span class="NAME">AjxCallback.simpleClosure</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">120</span> </span><span class="WHIT">			</span><span class="NAME">ZmOperation.addDeferredMenu</span><span class="PUNC">(</span><span class="NAME">ZmOperation.addContactGroupMenu</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">parent</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">121</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">122</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_COPY</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;copy&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Copy&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">123</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_DELETE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;del&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;deleteTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Delete&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.DEL</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">textPrecedence</span><span class="PUNC">:</span><span class="NUMB">60</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">124</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_DELETE_WITHOUT_SHORTCUT</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;del&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;deleteTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Delete&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">textPrecedence</span><span class="PUNC">:</span><span class="NUMB">60</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">125</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_DETACH</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;detachTT&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;detachTT&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;OpenInNewWindow&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">showImageInToolbar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">126</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_DETACH_WIN</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;detachTT&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;detachTT&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;OpenInNewWindow&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">127</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_EDIT</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;edit&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;editTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Edit&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.EDIT</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">128</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_EDIT_AS_NEW</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;editAsNew&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;editTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Edit&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.EDIT</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">129</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_EDIT_PROPS</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;editProperties&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;editPropertiesTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Properties&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">130</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_EXPAND</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;expand&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Plus&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">131</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_EXPAND_ALL</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;expandAll&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Plus&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">132</span> </span><span class="COMM">//	ZmOperation.registerOp(ZmId.OP_EXPORT_FOLDER, {textKey:&#34;exportFolder&#34;, image:&#34;MailExport&#34;});</span><span class="WHIT">
<span class="line">133</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_EMPTY_FOLDER</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;emptyFolder&#34;</span><span class="PUNC">,</span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;EmptyFolder&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">134</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_FORMAT_HTML</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;formatAsHtml&#34;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.HTML_COMPOSE_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">135</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_FORMAT_TEXT</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;formatAsText&#34;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.HTML_COMPOSE_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">136</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_FORMAT_MORE_OPTIONS</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;moreComposeOptions&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">137</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_GROUPBY</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;groupBy&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">138</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_GROUPBY_NONE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;groupByNone&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">139</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_GROUPBY_DATE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;groupByDate&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">140</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_GROUPBY_FROM</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;groupByFrom&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">141</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_GROUPBY_PRIORITY</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;groupByPriority&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">142</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_GROUPBY_SIZE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;groupBySize&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">143</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_GROUPBY_TAG</span><span class="PUNC">,</span><span class="WHIT">  </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;groupByTag&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">144</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_GO_TO_URL</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;URL&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;goToUrlAlt&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">145</span> </span><span class="COMM">//	ZmOperation.registerOp(ZmId.OP_IMPORT_FOLDER, {textKey:&#34;importFolder&#34;, image:&#34;MailImport&#34;});</span><span class="WHIT">
<span class="line">146</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_MARK_ALL_READ</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;markAllRead&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;ReadMessage&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">147</span> </span><span class="COMM">//	ZmOperation.registerOp(ZmId.OP_MOUNT_FOLDER, {textKey:&#34;mountFolder&#34;, image:&#34;Folder&#34;});</span><span class="WHIT">
<span class="line">148</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_MOVE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;move&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;moveTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;MoveToFolder&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">textPrecedence</span><span class="PUNC">:</span><span class="NUMB">40</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">showImageInToolbar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//todo - remove</span><span class="WHIT">
<span class="line">149</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_MOVE_MENU</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;move&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;moveTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;MoveToFolder&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">showImageInToolbar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">150</span> </span><span class="WHIT">		</span><span class="NAME">AjxCallback.simpleClosure</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">151</span> </span><span class="WHIT">			</span><span class="NAME">ZmOperation.addDeferredMenu</span><span class="PUNC">(</span><span class="NAME">ZmOperation.addMoveMenu</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">parent</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">152</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">153</span> 
<span class="line">154</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_MUTE_CONV</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;muteConv&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;muteConvTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Mute&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.MUTE_UNMUTE_CONV</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">155</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_OPTS</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;options&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;options&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;ContextMenu&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">156</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_NEW_FOLDER</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;newFolder&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;newFolderTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;NewFolder&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.NEW_FOLDER</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.USER_FOLDERS_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">157</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_NEW_MENU</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;_new&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.NEW</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">textPrecedence</span><span class="PUNC">:</span><span class="NUMB">100</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">158</span> </span><span class="WHIT">		</span><span class="NAME">AjxCallback.simpleClosure</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">159</span> </span><span class="WHIT">			</span><span class="NAME">ZmOperation.addDeferredMenu</span><span class="PUNC">(</span><span class="NAME">ZmOperation.addNewMenu</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">parent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">160</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">161</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_NEW_TAG</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;newTag&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;newTagTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;NewTag&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.NEW_TAG</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.TAGGING_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">162</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_NOTIFY</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;notify&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Feedback&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">163</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_PAGE_BACK</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;LeftArrow&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.PREV_PAGE</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">164</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_PAGE_FORWARD</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;RightArrow&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.NEXT_PAGE</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">165</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_PRINT</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;print&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;printTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Print&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.PRINT</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">textPrecedence</span><span class="PUNC">:</span><span class="NUMB">30</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">showImageInToolbar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.PRINT_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">166</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_PRIORITY_FILTER</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Priority&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;activityStream&#34;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.PRIORITY_INBOX_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">167</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_FIND_SHARES</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Group&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;findShares&#34;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.SHARING_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">168</span> 
<span class="line">169</span> </span><span class="WHIT">	</span><span class="COMM">//ZmOperation.registerOp(ZmId.OP_QUICK_COMMANDS, {textKey:&#34;quickCommands&#34;, image:&#34;QuickCommand&#34;});</span><span class="WHIT">
<span class="line">170</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_RECOVER_DELETED_ITEMS</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;recoverDeletedItems&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Trash&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;recoverDeletedItems&#34;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.DUMPSTER_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">171</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_REFRESH</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;refresh&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;refreshTooltip&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">172</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_RENAME_FOLDER</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;renameFolder&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Rename&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">173</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_RENAME_SEARCH</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;renameSearch&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Rename&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">174</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_RENAME_TAG</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;renameTag&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Rename&#34;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.TAGGING_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">175</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SAVE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;save&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Save&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.SAVE</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">176</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SEARCH</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;findEmailFromSender&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Search&#34;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.SEARCH_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">177</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SEARCH_TO</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;findEmailToSender&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Search&#34;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.SEARCH_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">178</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SEARCH_MENU</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;findEmails&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Search&#34;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.SEARCH_ENABLED</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">179</span> </span><span class="WHIT">		</span><span class="NAME">AjxCallback.simpleClosure</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">180</span> </span><span class="WHIT">			</span><span class="NAME">ZmOperation.addDeferredMenu</span><span class="PUNC">(</span><span class="NAME">ZmOperation.addSearchMenu</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">parent</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">181</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">182</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SEND</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;send&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;sendTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Send&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.SEND</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">183</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_FREE_BUSY_LINK</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;freeBusyLink&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;freeBusyLinkTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Send&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">184</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SEND_FB_HTML</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;sendHTMLLink&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;freeBusyLinkTooltip&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">185</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SEND_FB_ICS</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;sendICSLink&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;freeBusyLinkTooltip&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">186</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SEND_FB_ICS_EVENT</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;sendICSEventLink&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;freeBusyLinkTooltip&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">187</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SHARE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;share&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;shareTooltip&#34;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.SHARING_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">188</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SHARE_ACCEPT</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;acceptShare&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Check&#34;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.SHARING_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">189</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SHARE_DECLINE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;declineShare&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Cancel&#34;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.SHARING_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">190</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SUBSCRIBE_APPROVE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;dlApprove&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Check&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">191</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SUBSCRIBE_REJECT</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;dlReject&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Cancel&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">192</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SHARE_FOLDER</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;shareFolder&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;SharedMailFolder&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">193</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SHOW_ALL_ITEM_TYPES</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;showAllItemTypes&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Globe&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">194</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SORT_ASC</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;sortAscending&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">195</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SORT_DESC</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;sortDescending&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">196</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SPELL_CHECK</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;spellCheck&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;SpellCheck&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;spellCheckTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.SPELLCHECK</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">showImageInToolbar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.SPELL_CHECK_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">197</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SYNC</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;reload&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Refresh&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.REFRESH</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">198</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SYNC_ALL</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;checkAllFeed&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Refresh&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">199</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_SYNC_OFFLINE_FOLDER</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;syncOfflineFolderOff&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Refresh&#34;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.OFFLINE_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">/* offline only */</span><span class="WHIT">
<span class="line">200</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_TAG</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.TAGGING_ENABLED</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">201</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_TAG_COLOR_MENU</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;tagColor&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;TagStack&#34;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.TAGGING_ENABLED</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">202</span> </span><span class="WHIT">		</span><span class="NAME">AjxCallback.simpleClosure</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">203</span> </span><span class="WHIT">			</span><span class="NAME">ZmOperation.addDeferredMenu</span><span class="PUNC">(</span><span class="NAME">ZmOperation.addColorMenu</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">parent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">204</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">205</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_TAG_MENU</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">&#34;tag&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;tagTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Tag&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">showImageInToolbar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmSetting.TAGGING_ENABLED</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">206</span> </span><span class="WHIT">		</span><span class="NAME">AjxCallback.simpleClosure</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">207</span> </span><span class="WHIT">			</span><span class="NAME">ZmOperation.addDeferredMenu</span><span class="PUNC">(</span><span class="NAME">ZmOperation.addTagMenu</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">parent</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">208</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">209</span> </span><span class="WHIT">	</span><span class="COMM">// placeholder for toolbar text</span><span class="WHIT">
<span class="line">210</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_TEXT</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">211</span> </span><span class="WHIT">	</span><span class="COMM">// XXX: need new icon? -</span><span class="WHIT">
<span class="line">212</span> </span><span class="WHIT">	</span><span class="COMM">//      Undelete is stupid. We should either add it for all items types (not just contacts) or just kill it</span><span class="WHIT">
<span class="line">213</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_UNDELETE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;undelete&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;undelete&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;MoveToFolder&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">214</span> </span><span class="WHIT">    </span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_UNMUTE_CONV</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;unmuteConv&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;unmuteConvTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Unmute&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.MUTE_UNMUTE_CONV</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">215</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_VIEW</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;view&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;SplitView&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">216</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_VIEW_MENU</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;viewTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;view&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;SplitPane&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">textPrecedence</span><span class="PUNC">:</span><span class="NUMB">80</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">showImageInToolbar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">showTextInToolbar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">217</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_ZIMLET</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;ZimbraIcon&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">218</span> 
<span class="line">219</span> </span><span class="WHIT">	</span><span class="COMM">// invites - needed for both Mail and Calendar</span><span class="WHIT">
<span class="line">220</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_ACCEPT_PROPOSAL</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;replyAccept&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Check&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">221</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_DECLINE_PROPOSAL</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;replyDecline&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Cancel&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">222</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_CAL_REPLY</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;reply&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;replyTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Reply&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.REPLY</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">223</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_CAL_REPLY_ALL</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;replyAll&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="PUNC">:</span><span class="STRN">&#34;replyAllTooltip&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;ReplyAll&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">ZmKeyMap.REPLY_ALL</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">224</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_REPLY_ACCEPT</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;replyAccept&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Check&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">showTextInToolbar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">showImageInToolbar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">225</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_REPLY_ACCEPT_NOTIFY</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;notifyOrganizerLabel&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Check&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">226</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_REPLY_ACCEPT_IGNORE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;dontNotifyOrganizerLabel&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Check&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">227</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_REPLY_CANCEL</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">228</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_REPLY_DECLINE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;replyDecline&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Cancel&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">showTextInToolbar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">showImageInToolbar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">229</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_REPLY_DECLINE_NOTIFY</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;notifyOrganizerLabel&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Cancel&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">230</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_REPLY_DECLINE_IGNORE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;dontNotifyOrganizerLabel&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Cancel&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">231</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_REPLY_MODIFY</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">232</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_REPLY_NEW_TIME</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;replyNewTime&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;NewTime&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">233</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_REPLY_TENTATIVE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;replyTentative&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;QuestionMark&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">showTextInToolbar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">showImageInToolbar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">234</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_REPLY_TENTATIVE_NOTIFY</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;notifyOrganizerLabel&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;QuestionMark&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">235</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.registerOp</span><span class="PUNC">(</span><span class="NAME">ZmId.OP_REPLY_TENTATIVE_IGNORE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">textKey</span><span class="PUNC">:</span><span class="STRN">&#34;dontNotifyOrganizerLabel&#34;</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;QuestionMark&#34;</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">236</span> 
<span class="line">237</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.NEW_ORG_OPS.push</span><span class="PUNC">(</span><span class="NAME">ZmOperation.NEW_FOLDER</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmOperation.NEW_TAG</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">238</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.NEW_ORG_KEY</span><span class="PUNC">[</span><span class="NAME">ZmOperation.NEW_FOLDER</span><span class="PUNC">]</span><span class="WHIT">	</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;folder&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">239</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation.NEW_ORG_KEY</span><span class="PUNC">[</span><span class="NAME">ZmOperation.NEW_TAG</span><span class="PUNC">]</span><span class="WHIT">	</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">&#34;tag&#34;</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">240</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">241</span> 
<span class="line">242</span> </span><span class="COMM">/**
<span class="line">243</span>  * Creates operation descriptors for the given operation IDs,
<span class="line">244</span>  * then creates the appropriate widget for each operation based on the type of
<span class="line">245</span>  * the parent. If it&#39;s a toolbar, then buttons are created. If it&#39;s a menu, menu items are
<span class="line">246</span>  * created.
<span class="line">247</span>  * &lt;p&gt;
<span class="line">248</span>  * To override or add properties to a particular operation, pass in a hash of properties and
<span class="line">249</span>  * values as a value in overrides, with the operation ID as the key.
<span class="line">250</span>  * &lt;/p&gt;
<span class="line">251</span>  *
<span class="line">252</span>  * @param {DwtComposite}	parent		the containing widget (toolbar or menu)
<span class="line">253</span>  * @param {Array}	operations	a list of operation IDs
<span class="line">254</span>  * @param {Hash}	overrides		a hash of overrides by op ID
<span class="line">255</span>  *
<span class="line">256</span>  * @returns	{Hash}	a hash of operations by ID
<span class="line">257</span>  */</span><span class="WHIT">
<span class="line">258</span> </span><span class="NAME">ZmOperation.createOperations</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">259</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">operations</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">overrides</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">260</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">obj</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">ZmOperation</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">261</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">obj._createOperations</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">operations</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">overrides</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">262</span> </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">263</span> 
<span class="line">264</span> </span><span class="COMM">/**
<span class="line">265</span>  * Done through an object so that we can have more than one invocation going
<span class="line">266</span>  * without sharing memory (eg, creating New submenu).
<span class="line">267</span>  * 
<span class="line">268</span>  * @private
<span class="line">269</span>  */</span><span class="WHIT">
<span class="line">270</span> </span><span class="NAME">ZmOperation.prototype._createOperations</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">271</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">operations</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">overrides</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">272</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">operations</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">ZmOperation.NONE</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">273</span> </span><span class="WHIT">		</span><span class="NAME">operations</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">274</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">275</span> </span><span class="WHIT">	</span><span class="NAME">overrides</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">overrides</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">276</span> 
<span class="line">277</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">opHash</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">278</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">operations</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">operations.length</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">279</span> </span><span class="WHIT">		</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">operations.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">280</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">operations</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">281</span> </span><span class="WHIT">			</span><span class="NAME">ZmOperation.defineOperation</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">overrides</span><span class="PUNC">[</span><span class="NAME">id</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">282</span> </span><span class="WHIT">			</span><span class="NAME">ZmOperation.addOperation</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opHash</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">overrides</span><span class="PUNC">[</span><span class="NAME">id</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">overrides</span><span class="PUNC">[</span><span class="NAME">id</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">htmlElId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">283</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">284</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">285</span> 
<span class="line">286</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">opHash</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">287</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">288</span> 
<span class="line">289</span> </span><span class="COMM">/**
<span class="line">290</span> * Creates an operation descriptor. The ID of an existing operation can be passed
<span class="line">291</span> * in to use as a base, with overridden properties passed in a hash. A new operation
<span class="line">292</span> * can be defined by passing its properties in a hash.
<span class="line">293</span> *
<span class="line">294</span> * @param {String}	baseId		the ID of an existing operation
<span class="line">295</span> * @param {Hash}	overrides	the property overrides for the operation
<span class="line">296</span> */</span><span class="WHIT">
<span class="line">297</span> </span><span class="NAME">ZmOperation.defineOperation</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">298</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">baseId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">overrides</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">299</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">overrides</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">overrides.id</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">baseId</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">baseId.id</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">baseId</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">Dwt.getNextId</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">300</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">textKey</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">overrides</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">overrides.textKey</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">ZmOperation.getProp</span><span class="PUNC">(</span><span class="NAME">baseId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;textKey&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">301</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">text</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">textKey</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">ZmMsg</span><span class="PUNC">[</span><span class="NAME">textKey</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">302</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">overrides</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">overrides.tooltipKey</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">ZmOperation.getProp</span><span class="PUNC">(</span><span class="NAME">baseId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;tooltipKey&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">303</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">tooltip</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tooltipKey</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">ZmMsg</span><span class="PUNC">[</span><span class="NAME">tooltipKey</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">304</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">image</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ZmOperation.getProp</span><span class="PUNC">(</span><span class="NAME">baseId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;image&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">305</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">showImageInToolbar</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ZmOperation.getProp</span><span class="PUNC">(</span><span class="NAME">baseId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;showImageInToolbar&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">306</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">showTextInToolbar</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ZmOperation.getProp</span><span class="PUNC">(</span><span class="NAME">baseId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;showTextInToolbar&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">307</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">disImage</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ZmOperation.getProp</span><span class="PUNC">(</span><span class="NAME">baseId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;disImage&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">308</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">enabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">overrides</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">overrides.enabled</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">309</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">style</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ZmOperation.getProp</span><span class="PUNC">(</span><span class="NAME">baseId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;style&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">310</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ZmOperation.getProp</span><span class="PUNC">(</span><span class="NAME">baseId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;shortcut&#34;</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">311</span> 
<span class="line">312</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">opDesc</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">id</span><span class="PUNC">:</span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">text</span><span class="PUNC">:</span><span class="NAME">text</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">:</span><span class="NAME">image</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">showImageInToolbar</span><span class="PUNC">:</span><span class="NAME">showImageInToolbar</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">showTextInToolbar</span><span class="PUNC">:</span><span class="NAME">showTextInToolbar</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">disImage</span><span class="PUNC">:</span><span class="NAME">disImage</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">enabled</span><span class="PUNC">:</span><span class="NAME">enabled</span><span class="PUNC">,</span><span class="WHIT">
<span class="line">313</span> </span><span class="WHIT">				  </span><span class="NAME">tooltip</span><span class="PUNC">:</span><span class="NAME">tooltip</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">style</span><span class="PUNC">:</span><span class="NAME">style</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">:</span><span class="NAME">shortcut</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">314</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">overrides</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">315</span> </span><span class="WHIT">		</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">overrides</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">316</span> </span><span class="WHIT">			</span><span class="NAME">opDesc</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">overrides</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">317</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">318</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">319</span> 
<span class="line">320</span> </span><span class="WHIT">	</span><span class="NAME">ZmOperation._operationDesc</span><span class="PUNC">[</span><span class="NAME">id</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">opDesc</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">321</span> </span><span class="WHIT">	
<span class="line">322</span> 	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">opDesc</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">323</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">324</span> 
<span class="line">325</span> </span><span class="COMM">/**
<span class="line">326</span>  * Gets the value of a given property for a given operation.
<span class="line">327</span>  *
<span class="line">328</span>  * @param {String}	id		the operation ID
<span class="line">329</span>  * @param {String}	prop	the name of an operation property
<span class="line">330</span>  * 
<span class="line">331</span>  * @return	{Object}	the value
<span class="line">332</span>  */</span><span class="WHIT">
<span class="line">333</span> </span><span class="NAME">ZmOperation.getProp</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">334</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">prop</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">335</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">336</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">setup</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ZmOperation.SETUP</span><span class="PUNC">[</span><span class="NAME">id</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">337</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">setup</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">338</span> </span><span class="WHIT">		</span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">setup</span><span class="PUNC">[</span><span class="NAME">prop</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">339</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">prop</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">&#34;disImage&#34;</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">setup.image</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">340</span> </span><span class="WHIT">			</span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">setup.image</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">341</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">342</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">343</span> 
<span class="line">344</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">345</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">346</span> 
<span class="line">347</span> </span><span class="COMM">/**
<span class="line">348</span>  * Checks if the operation is a separator or spacer.
<span class="line">349</span>  * 
<span class="line">350</span>  * @param	{String}	id		the id
<span class="line">351</span>  * @return	{Boolean}	&lt;code&gt;true&lt;/code&gt; if the operation is a spacer
<span class="line">352</span>  */</span><span class="WHIT">
<span class="line">353</span> </span><span class="NAME">ZmOperation.isSep</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">354</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">355</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">ZmOperation.SEP</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">ZmOperation.SPACER</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">ZmOperation.FILLER</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">356</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">357</span> 
<span class="line">358</span> </span><span class="COMM">/**
<span class="line">359</span>  * Adds the operation.
<span class="line">360</span>  * 
<span class="line">361</span>  * @param {DwtComposite}	parent		the containing widget (toolbar or menu)
<span class="line">362</span>  * @param	{String}		id		the id
<span class="line">363</span>  * @param	{Hash}		opHash		a hash
<span class="line">364</span>  * @param	{String}	[index]		the index
<span class="line">365</span>  */</span><span class="WHIT">
<span class="line">366</span> </span><span class="NAME">ZmOperation.addOperation</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">367</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opHash</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">index</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">htmlElId</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">368</span> 
<span class="line">369</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">opDesc</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ZmOperation._operationDesc</span><span class="PUNC">[</span><span class="NAME">id</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">ZmOperation.defineOperation</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">370</span> 
<span class="line">371</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">ZmOperation.SEP</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">372</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">parent</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">DwtMenu</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">373</span> </span><span class="WHIT">            </span><span class="NAME">parent.createSeparator</span><span class="PUNC">(</span><span class="NAME">index</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">374</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">375</span> </span><span class="WHIT">        </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">376</span> </span><span class="WHIT">            </span><span class="NAME">parent.addSeparator</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">index</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">377</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">378</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">ZmOperation.SPACER</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">	</span><span class="COMM">// toolbar only</span><span class="WHIT">
<span class="line">379</span> </span><span class="WHIT">		</span><span class="NAME">parent.addSpacer</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">index</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">380</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">ZmOperation.FILLER</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">	</span><span class="COMM">// toolbar only</span><span class="WHIT">
<span class="line">381</span> </span><span class="WHIT">		</span><span class="NAME">parent.addFiller</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">index</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">382</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">383</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">index</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">384</span> </span><span class="WHIT">			</span><span class="NAME">opDesc.index</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">index</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">385</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">386</span> </span><span class="WHIT">		</span><span class="NAME">opHash</span><span class="PUNC">[</span><span class="NAME">id</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parent.createOp</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opDesc</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">htmlElId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">387</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">388</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">callback</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ZmOperation.CALLBACK</span><span class="PUNC">[</span><span class="NAME">id</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">389</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">callback</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">390</span> </span><span class="WHIT">		</span><span class="NAME">callback.run</span><span class="PUNC">(</span><span class="NAME">opHash</span><span class="PUNC">[</span><span class="NAME">id</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">391</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">392</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">393</span> 
<span class="line">394</span> </span><span class="COMM">/**
<span class="line">395</span>  * Adds a deferred menu.
<span class="line">396</span>  * 
<span class="line">397</span>  * @param	{function}	addMenuFunc		the add menu function
<span class="line">398</span>  * @param {DwtComposite}	parent		the containing widget (toolbar or menu)
<span class="line">399</span>  */</span><span class="WHIT">
<span class="line">400</span> </span><span class="NAME">ZmOperation.addDeferredMenu</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">401</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">addMenuFunc</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">parent</span><span class="WHIT"> </span><span class="COMM">/* ... */</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">402</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">args</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">parent</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">403</span> </span><span class="WHIT">    </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">arguments.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">404</span> </span><span class="WHIT">        </span><span class="NAME">args.push</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">405</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">406</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">callback</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">AjxCallback</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">addMenuFunc</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">args</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">407</span> </span><span class="WHIT">	</span><span class="NAME">parent.setMenu</span><span class="PUNC">(</span><span class="NAME">callback</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">408</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">409</span> 
<span class="line">410</span> </span><span class="COMM">/**
<span class="line">411</span>  * Removes the operation.
<span class="line">412</span>  * 
<span class="line">413</span>  * @param {DwtComposite}	parent		the containing widget (toolbar or menu)
<span class="line">414</span>  * @param	{String}	id		the id
<span class="line">415</span>  * @param	{Hash}	opHash		a hash
<span class="line">416</span>  */</span><span class="WHIT">
<span class="line">417</span> </span><span class="NAME">ZmOperation.removeOperation</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">418</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opHash</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">419</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">op</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parent.getOp</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">420</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">op</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">421</span> </span><span class="WHIT">		</span><span class="NAME">op.dispose</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">422</span> </span><span class="WHIT">		</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">opHash</span><span class="PUNC">[</span><span class="NAME">id</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">423</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">424</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">425</span> 
<span class="line">426</span> </span><span class="COMM">/**
<span class="line">427</span>  * Replaces the attributes of one operation with those of another, wholly or in part.
<span class="line">428</span>  *
<span class="line">429</span>  * @param {DwtComposite}	parent		the parent widget
<span class="line">430</span>  * @param {String}	oldOp		the ID of operation to replace
<span class="line">431</span>  * @param {String}	newOp		the ID of new operation to get replacement attributes from
<span class="line">432</span>  * @param {String}	text		the new text (overrides text of newOp)
<span class="line">433</span>  * @param {String}	image		the new image (overrides image of newOp)
<span class="line">434</span>  * @param {String}	disImage	the new disabled image (overrides that of newOp)
<span class="line">435</span>  */</span><span class="WHIT">
<span class="line">436</span> </span><span class="NAME">ZmOperation.setOperation</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">437</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">oldOp</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">newOp</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">text</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">image</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">disImage</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">438</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">op</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parent.getOp</span><span class="PUNC">(</span><span class="NAME">oldOp</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">439</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">op</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">440</span> 
<span class="line">441</span> </span><span class="WHIT">	</span><span class="NAME">op.setText</span><span class="PUNC">(</span><span class="NAME">text</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">text</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">ZmMsg</span><span class="PUNC">[</span><span class="NAME">ZmOperation.getProp</span><span class="PUNC">(</span><span class="NAME">newOp</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;textKey&#34;</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">442</span> </span><span class="WHIT">	</span><span class="NAME">op.setImage</span><span class="PUNC">(</span><span class="NAME">image</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">image</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">ZmOperation.getProp</span><span class="PUNC">(</span><span class="NAME">newOp</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">&#34;image&#34;</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">443</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">444</span> 
<span class="line">445</span> </span><span class="COMM">/**
<span class="line">446</span>  * Takes a list of operations and removes any who have a corresponding setting that&#39;s
<span class="line">447</span>  * not set. Also deals with the fact that you don&#39;t want a separator or a spacer unless
<span class="line">448</span>  * there&#39;s stuff on either side of it.
<span class="line">449</span>  * 
<span class="line">450</span>  * @param	{Array}	list		a list of {ZmOperation} objects
<span class="line">451</span>  * @return	{Array}		a list of {ZmOperation} objects
<span class="line">452</span>  */</span><span class="WHIT">
<span class="line">453</span> </span><span class="NAME">ZmOperation.filterOperations</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">454</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">list</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">455</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">newList</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">456</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">list</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">list.length</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">newList</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">457</span> </span><span class="WHIT">	
<span class="line">458</span> 	</span><span class="COMM">// remove disabled operations</span><span class="WHIT">
<span class="line">459</span> </span><span class="WHIT">	</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">list.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">460</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">op</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">list</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">461</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">op</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="KEYW">continue</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT">
<span class="line">462</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">setting</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ZmOperation.SETTING</span><span class="PUNC">[</span><span class="NAME">op</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">463</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">setting</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">appCtxt.get</span><span class="PUNC">(</span><span class="NAME">setting</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">464</span> </span><span class="WHIT">			</span><span class="NAME">newList.push</span><span class="PUNC">(</span><span class="NAME">op</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">465</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">466</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">467</span> </span><span class="WHIT">	</span><span class="COMM">// reduce multiple consecutive separators to the first one</span><span class="WHIT">
<span class="line">468</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">newList1</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">469</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">gotSep</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">470</span> </span><span class="WHIT">	</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">newList.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">471</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">op</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">newList</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">472</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">op</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">ZmOperation.SEP</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">op</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">ZmOperation.SPACER</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">473</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">gotSep</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">474</span> </span><span class="WHIT">				</span><span class="NAME">newList1.push</span><span class="PUNC">(</span><span class="NAME">op</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">475</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">476</span> </span><span class="WHIT">			</span><span class="NAME">gotSep</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">477</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">478</span> </span><span class="WHIT">			</span><span class="NAME">newList1.push</span><span class="PUNC">(</span><span class="NAME">op</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">479</span> </span><span class="WHIT">			</span><span class="NAME">gotSep</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">480</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">481</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">482</span> </span><span class="WHIT">	</span><span class="COMM">// remove separator at beginning or end</span><span class="WHIT">
<span class="line">483</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">newList1</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">newList1.length</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">484</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">newList1</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">ZmOperation.SEP</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">newList1</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">ZmOperation.SPACER</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">485</span> </span><span class="WHIT">			</span><span class="NAME">newList1.shift</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">486</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">487</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">newList1.length</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">488</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">newList1</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">ZmOperation.SEP</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">newList1</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">ZmOperation.SPACER</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">newList1</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">ZmOperation.FILLER</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">489</span> </span><span class="WHIT">			</span><span class="NAME">newList1.pop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">490</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">491</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">492</span> </span><span class="WHIT">	
<span class="line">493</span> 	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">newList1</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">494</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">495</span> 
<span class="line">496</span> </span><span class="COMM">/**
<span class="line">497</span>  * Adds a &#34;New&#34; submenu. Overrides are used because we don&#39;t want &#34;New&#34; at the
<span class="line">498</span>  * beginning of each label.
<span class="line">499</span>  *
<span class="line">500</span>  * @param {DwtComposite}		parent		the parent widget
<span class="line">501</span>  * @return	{ZmActionMenu}	the menu
<span class="line">502</span>  */</span><span class="WHIT">
<span class="line">503</span> </span><span class="NAME">ZmOperation.addNewMenu</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">504</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">505</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">list</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ZmOperation.NEW_ITEM_OPS</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">506</span> </span><span class="WHIT">	</span><span class="NAME">list.push</span><span class="PUNC">(</span><span class="NAME">ZmOperation.SEP</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">507</span> </span><span class="WHIT">	</span><span class="NAME">list</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">list.concat</span><span class="PUNC">(</span><span class="NAME">ZmOperation.NEW_ORG_OPS</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">508</span> 
<span class="line">509</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">overrides</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">510</span> </span><span class="WHIT">	</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">list.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">511</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">op</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">list</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">512</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">htmlElId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parent._htmlElId</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">&#34;_&#34;</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">op</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">513</span> </span><span class="WHIT">		</span><span class="NAME">overrides</span><span class="PUNC">[</span><span class="NAME">op</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">htmlElId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">htmlElId</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">514</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">textKey</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ZmOperation.NEW_ITEM_KEY</span><span class="PUNC">[</span><span class="NAME">op</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">ZmOperation.NEW_ORG_KEY</span><span class="PUNC">[</span><span class="NAME">op</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">515</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">textKey</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">516</span> </span><span class="WHIT">			</span><span class="NAME">overrides</span><span class="PUNC">[</span><span class="NAME">op</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">textKey</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">textKey</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">517</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">518</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class="line">519</span> 
<span class="line">520</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">menu</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">ZmActionMenu</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">parent</span><span class="PUNC">:</span><span class="NAME">parent</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">menuItems</span><span class="PUNC">:</span><span class="NAME">list</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">overrides</span><span class="PUNC">:</span><span class="NAME">overrides</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">521</span> </span><span class="WHIT">	</span><span class="NAME">parent.setMenu</span><span class="PUNC">(</span><span class="NAME">menu</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">522</span> 
<span class="line">523</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">menu</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">524</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">525</span> 
<span class="line">526</span> </span><span class="COMM">/**
<span class="line">527</span>  * Adds a &#34;Search&#34; submenu for searching from/to sender/recipient.
<span class="line">528</span>  *
<span class="line">529</span>  * @param {DwtComposite}	parent		parent widget (a toolbar or action menu)
<span class="line">530</span>  * @return	{ZmActionMenu}	the menu
<span class="line">531</span>  */</span><span class="WHIT">
<span class="line">532</span> </span><span class="NAME">ZmOperation.addSearchMenu</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">533</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">534</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">list</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">ZmOperation.SEARCH</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ZmOperation.SEARCH_TO</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">535</span> 
<span class="line">536</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">menu</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">ZmActionMenu</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">parent</span><span class="PUNC">:</span><span class="NAME">parent</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">menuItems</span><span class="PUNC">:</span><span class="NAME">list</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">537</span> </span><span class="WHIT">	</span><span class="NAME">parent.setMenu</span><span class="PUNC">(</span><span class="NAME">menu</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">538</span> 
<span class="line">539</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">menu</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">540</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">541</span> 
<span class="line">542</span> </span><span class="COMM">/**
<span class="line">543</span>  * Adds a contact group menu for creating a contacts from the contact list
<span class="line">544</span>  * @param {DwtComposite}    parent  parent widget (a toolbar or action menu)
<span class="line">545</span>  * @return {ZmActionMenu) the menu
<span class="line">546</span>  */</span><span class="WHIT">
<span class="line">547</span> </span><span class="NAME">ZmOperation.addContactGroupMenu</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">548</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">549</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">contactGroupMenu</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">ZmContactGroupMenu</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">550</span> </span><span class="WHIT">	</span><span class="NAME">parent.setMenu</span><span class="PUNC">(</span><span class="NAME">contactGroupMenu</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">551</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">contactGroupMenu</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">552</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">553</span> 
<span class="line">554</span> </span><span class="COMM">/**
<span class="line">555</span>  * Adds a &#34;Tag&#34; submenu for tagging items.
<span class="line">556</span>  *
<span class="line">557</span>  * @param {DwtComposite}	parent		parent widget (a toolbar or action menu)
<span class="line">558</span>  * @return	{ZmTagMenu}	the menu
<span class="line">559</span>  */</span><span class="WHIT">
<span class="line">560</span> </span><span class="NAME">ZmOperation.addTagMenu</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">561</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">562</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">tagMenu</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">ZmTagMenu</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">563</span> </span><span class="WHIT">	</span><span class="NAME">parent.setMenu</span><span class="PUNC">(</span><span class="NAME">tagMenu</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">564</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">tagMenu</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">565</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">566</span> 
<span class="line">567</span> 
<span class="line">568</span> </span><span class="COMM">/**
<span class="line">569</span> * Adds a &#34;Move&#34; submenu for tagging items.
<span class="line">570</span> *
<span class="line">571</span> * @param {DwtComposite}	parent		parent widget (a toolbar or action menu)
<span class="line">572</span> * @return	{ZmTagMenu}	the menu
<span class="line">573</span> */</span><span class="WHIT">
<span class="line">574</span> </span><span class="NAME">ZmOperation.addMoveMenu</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">575</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">576</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">moveMenu</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">DwtMenu</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//this is a dummy menu just so the drop-down would appear</span><span class="WHIT">
<span class="line">577</span> </span><span class="WHIT">	</span><span class="NAME">parent.setMenu</span><span class="PUNC">(</span><span class="NAME">moveMenu</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">578</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">moveMenu</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">579</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">580</span> 
<span class="line">581</span> </span><span class="COMM">/**
<span class="line">582</span>  * Adds a color submenu for choosing tag color.
<span class="line">583</span>  *
<span class="line">584</span>  * @param {DwtComposite}	parent		parent widget (a toolbar or action menu)
<span class="line">585</span>  * @param {boolean} hideNoFill True to hide the no-fill/use-default option.
<span class="line">586</span>  * @return	{ZmPopupMenu}	the menu
<span class="line">587</span>  */</span><span class="WHIT">
<span class="line">588</span> </span><span class="NAME">ZmOperation.addColorMenu</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">589</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">hideNoFill</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">590</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">menu</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">ZmColorMenu</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">parent</span><span class="PUNC">:</span><span class="NAME">parent</span><span class="PUNC">,</span><span class="NAME">image</span><span class="PUNC">:</span><span class="STRN">&#34;Tag&#34;</span><span class="PUNC">,</span><span class="NAME">hideNone</span><span class="PUNC">:</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">hideNoFill</span><span class="PUNC">:</span><span class="NAME">hideNoFill</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">591</span> </span><span class="WHIT">    </span><span class="NAME">parent.setMenu</span><span class="PUNC">(</span><span class="NAME">menu</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">592</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">menu</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">593</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">594</span> 
<span class="line">595</span> </span><span class="COMM">/**
<span class="line">596</span>  * Gets the tooltip for the operation with the given ID. If the operation has a shortcut associated
<span class="line">597</span>  * with it, a shortcut hint is appended to the end of the tooltip.
<span class="line">598</span>  *
<span class="line">599</span>  * @param {String}	id		the operation ID
<span class="line">600</span>  * @param {String}	keyMap	the key map (for resolving shortcut)
<span class="line">601</span>  * @param {String}	tooltip	the tooltip override
<span class="line">602</span>  * @return	{String}	the tool tip
<span class="line">603</span>  */</span><span class="WHIT">
<span class="line">604</span> </span><span class="NAME">ZmOperation.getToolTip</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class="line">605</span> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">keyMap</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tooltip</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class="line">606</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">opDesc</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ZmOperation._operationDesc</span><span class="PUNC">[</span><span class="NAME">id</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">ZmOperation.defineOperation</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">607</span> </span><span class="WHIT">	</span><span class="NAME">tooltip</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tooltip</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">opDesc.tooltip</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">608</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">sc</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tooltip</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">opDesc.shortcut</span><span class="WHIT"> </span><span class="PUNC">&amp;&amp;</span><span class="WHIT"> </span><span class="NAME">appCtxt.getShortcutHint</span><span class="PUNC">(</span><span class="NAME">keyMap</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opDesc.shortcut</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">609</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">sc</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">tooltip</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">sc</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">join</span><span class="PUNC">(</span><span class="STRN">&#34;&#34;</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">tooltip</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">610</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class="line">611</span> </span></pre></body></html>